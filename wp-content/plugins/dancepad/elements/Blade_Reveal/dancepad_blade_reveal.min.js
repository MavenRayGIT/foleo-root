class NextBladeReveal{static instances=[];constructor(element){Object.assign(this,{element,inner:element.querySelector(".dan-blade-reveal__inner"),start:element.getAttribute("data-start"),end:element.getAttribute("data-end"),ease:element.getAttribute("data-easing"),duration:parseFloat(element.getAttribute("data-duration")),splitType:element.getAttribute("data-split"),skew:parseFloat(element.getAttribute("data-skew")),stagger:parseFloat(element.getAttribute("data-stagger")),delay:parseFloat(element.getAttribute("data-delay")),trigger:element.getAttribute("data-trigger")==="this"?element:element.getAttribute("data-trigger"),toggleActions:element.getAttribute("data-toggleactions"),scrub:element.getAttribute("data-scrub")==="1",additionalTriggers:element.getAttribute("data-additional_triggers"),triggerElement:element.getAttribute("data-element"),fromDir:element.getAttribute("data-from"),distance:element.getAttribute("data-distance"),eventListeners:[],lineWrappers:[],});this.fromValue=this.fromDir==="bottom"?parseFloat(this.distance):parseFloat(this.distance)*-1;this.initialize()}
initialize(){if(!this.inner)return;const content=this.inner.getAttribute("data-content");if(!content)return;this.inner.innerHTML=content;this.createSplitText();this.wrapLines();this.createAnimation();this.setupAdditionalTriggers()}
createSplitText(){if(this.splitType=="lines"){this.splitText=new SplitText(this.inner,{type:"lines",linesClass:"line"})}else if(this.splitType=="words"){this.splitText=new SplitText(this.inner,{type:"lines, words",linesClass:"line",wordsClass:"word"})}else if(this.splitType=="chars"){this.splitText=new SplitText(this.inner,{type:"lines, words, chars",linesClass:"line",wordsClass:"word",charsClass:"char"})}
this.splitElements=this.splitType==="chars"?this.splitText.chars:this.splitType==="words"?this.splitText.words:this.splitText.lines}
wrapLines(){this.lineWrappers.forEach((wrapper)=>wrapper.remove());this.lineWrappers=[];this.splitText.lines.forEach((line)=>{const wrapper=document.createElement("div");wrapper.classList.add("dan-blade-reveal__line-wrapper");wrapper.appendChild(line);this.inner.appendChild(wrapper);this.lineWrappers.push(wrapper)})}
createAnimation(){const containerName=[...document.querySelectorAll(".dan-horizontal-scroll")].findIndex((scroll)=>scroll.contains(this.element))!==-1?`NextHorizontalScroll${[...document.querySelectorAll(".dan-horizontal-scroll")].findIndex((scroll) => scroll.contains(this.element))}`:undefined;this.animation=gsap.timeline({scrollTrigger:{trigger:this.trigger,containerAnimation:containerName?window[containerName]:undefined,start:this.start,end:this.end,toggleActions:this.toggleActions,scrub:this.scrub}}).fromTo(this.splitElements,{y:this.fromValue,skewY:this.skew},{y:0,skewY:0,duration:this.duration,delay:this.delay,stagger:this.stagger,ease:this.ease})}
setupAdditionalTriggers(){if(this.additionalTriggers&&this.triggerElement){const eventType=this.additionalTriggers.includes("click")?"click":"mouseover";[...document.querySelectorAll(this.triggerElement)].forEach((el)=>{const listener=()=>this.animation.restart();el.addEventListener(eventType,listener);this.eventListeners.push({element:el,type:eventType,listener})})}}
destroy(){if(this.animation?.scrollTrigger){this.animation.scrollTrigger.kill()}
if(this.animation){this.animation.kill()}
if(this.splitText){this.splitText.revert();this.splitElements=null}
this.lineWrappers.forEach((wrapper)=>wrapper.remove());this.lineWrappers=[];this.eventListeners.forEach(({element,type,listener})=>{element.removeEventListener(type,listener)});this.eventListeners=[];if(this.inner){const originalContent=this.inner.getAttribute("data-content")||"";this.inner.innerHTML=originalContent}}
static destroyAll(){NextBladeReveal.instances.forEach((instance)=>instance.destroy());NextBladeReveal.instances=[]}}
const dancepad_blade_reveal=()=>{if(document.querySelector(".dan-site-loader")&&!window.location.href.includes("breakdance_iframe")){return}
gsap.registerPlugin(ScrollTrigger);NextBladeReveal.destroyAll();const instances=[];const animations={};document.querySelectorAll(".dan-blade-reveal").forEach((element,index)=>{element.removeAttribute("data-flickering");const instance=new NextBladeReveal(element);instances.push(instance);animations[`anim${index}`]=instance.animation});NextBladeReveal.instances=instances;return animations};const dancepad_blade_reveal_site_loader=()=>{gsap.registerPlugin(ScrollTrigger);NextBladeReveal.destroyAll();const instances=[];const animations={};document.querySelectorAll(".dan-blade-reveal").forEach((element,index)=>{element.removeAttribute("data-flickering");const instance=new NextBladeReveal(element);instances.push(instance);animations[`anim${index}`]=instance.animation});NextBladeReveal.instances=instances;return animations}