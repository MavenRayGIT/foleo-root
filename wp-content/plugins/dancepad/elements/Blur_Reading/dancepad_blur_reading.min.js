class NextBlurReading{static instances=[];constructor(element){Object.assign(this,{element,blur:parseFloat(element.getAttribute("data-blur")),start:element.getAttribute("data-start"),end:element.getAttribute("data-end"),stagger:element.getAttribute("data-stagger"),splitType:element.getAttribute("data-split"),scroller:element.getAttribute("data-scroller"),easing:element.getAttribute("data-easing"),version:this.getVersion(element),splitter:null,resizeObserver:null,animation:null,});this.initialize()}
getVersion(element){if(element.classList.contains("dan-blur-reading--v1"))return 1;if(element.classList.contains("dan-blur-reading--v2"))return 2;if(element.classList.contains("dan-blur-reading--v3"))return 3;if(element.classList.contains("dan-blur-reading--v4"))return 4;return 1}
initialize(){this.updateContent();this.createSplitText();this.setupResizeObserver();this.createAnimation()}
updateContent(){const content=this.element.getAttribute("data-content");if(content){this.element.innerHTML=content}}
createSplitText(){if(this.splitter){this.splitter.revert()}
this.splitter=new SplitText(this.element,{type:"words,chars",charsClass:"blur-char",wordsClass:"blur-word"})}
setupResizeObserver(){this.resizeObserver=new ResizeObserver(()=>{if(this.splitter){this.splitter.revert();this.updateContent();this.createSplitText();this.createAnimation()}});this.resizeObserver.observe(this.element)}
getTargetElements(){return this.splitType==="chars"?this.splitter.chars:this.splitter.words}
getAnimationConfig(){const configs={1:{from:{filter:`blur(${this.blur}px)`},to:{filter:"blur(0px)"}},2:{from:{filter:`blur(${this.blur}px)`},to:{filter:"blur(0px)"}},3:{from:{scaleY:0.1,scaleX:1.8,filter:`blur(${this.blur}px)`},to:{scaleY:1,scaleX:1,filter:"blur(0px)"}},4:{from:{opacity:0,skewX:-20,filter:`blur(${this.blur}px)`},to:{opacity:1,skewX:0,filter:"blur(0px)"}},};return configs[this.version]}
createAnimation(){if(this.animation?.scrollTrigger){this.animation.scrollTrigger.kill();this.animation.kill()}
const config=this.getAnimationConfig();const elements=this.getTargetElements();this.animation=gsap.fromTo(elements,config.from,{...config.to,ease:this.easing,stagger:parseFloat(this.stagger),scrollTrigger:{trigger:this.element,start:this.start,end:this.end,scrub:!0,scroller:this.scroller},})}
destroy(){if(this.resizeObserver){this.resizeObserver.disconnect()}
if(this.splitter){this.splitter.revert()}
if(this.animation?.scrollTrigger){this.animation.scrollTrigger.kill()}
if(this.animation){this.animation.kill()}
const content=this.element.getAttribute("data-content");if(content){this.element.innerHTML=content}}
static destroyAll(){NextBlurReading.instances.forEach((instance)=>instance.destroy());NextBlurReading.instances=[]}}
const dancepad_blur_reading=()=>{gsap.registerPlugin(ScrollTrigger);NextBlurReading.destroyAll();document.querySelectorAll(".dan-blur-reading--v1, .dan-blur-reading--v2, .dan-blur-reading--v3, .dan-blur-reading--v4").forEach((element)=>{element.removeAttribute("data-flickering");NextBlurReading.instances.push(new NextBlurReading(element))})}