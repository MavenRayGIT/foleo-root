class LoopingTabs{static instances=[];constructor(loopingTabs){this.loopingTabs=loopingTabs;this.loopingTabs.removeAttribute('data-flickering');this.navItems=loopingTabs.querySelectorAll('.dan-looping-tabs__nav-item');this.tabs=loopingTabs.querySelectorAll('.dan-looping-tabs__tab');this.loopDuration=parseFloat(loopingTabs.getAttribute('data-loop-duration'))*1000;this.activeIndex=parseFloat(loopingTabs.getAttribute('data-active-tab'))-1||0;this.gsapEase=loopingTabs.getAttribute('data-gsap-ease')||'linear';this.mode=loopingTabs.getAttribute('data-mode')||'horizontal';this.interval=null;const isBreakdance=window.location.href.includes("breakdance");if(isBreakdance&&loopingTabs.getAttribute('data-disable-builder')?.includes('1')){this.navItems[0].classList.add('dan-looping-tabs__nav-item--active');this.tabs[0].classList.add('dan-looping-tabs__tab--active');return}
this.init()}
init(){this.startLoop();this.navItems.forEach((item,index)=>{item.addEventListener('click',()=>{this.activeIndex=index;this.startLoop()});item.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.keyCode===13){this.activeIndex=index;this.startLoop()}})})}
activateTab(index){this.navItems.forEach(item=>item.classList.remove('dan-looping-tabs__nav-item--active'));this.tabs.forEach(tab=>tab.classList.remove('dan-looping-tabs__tab--active'));this.navItems.forEach(item=>{const loopProgress=item.querySelector('.dan-looping-tabs__loop-mask');if(loopProgress){if(this.mode==='vertical'){gsap.set(loopProgress,{height:'100%'})}else{gsap.set(loopProgress,{width:'100%'})}}});gsap.killTweensOf(this.navItems);this.navItems.forEach(item=>{const loopProgress=item.querySelector('.dan-looping-tabs__loop-mask');if(loopProgress){gsap.killTweensOf(loopProgress)}});this.navItems[index].classList.add('dan-looping-tabs__nav-item--active');this.tabs[index].classList.add('dan-looping-tabs__tab--active');const loopMask=this.navItems[index].querySelector('.dan-looping-tabs__loop-mask');if(loopMask){if(this.mode==='vertical'){gsap.set(loopMask,{height:'100%'});gsap.to(loopMask,{height:'0%',duration:this.loopDuration/1000,ease:this.gsapEase})}else{gsap.set(loopMask,{width:'100%'});gsap.to(loopMask,{width:'0%',duration:this.loopDuration/1000,ease:this.gsapEase})}}}
startLoop(){this.activateTab(this.activeIndex);if(this.interval)clearInterval(this.interval);this.interval=setInterval(()=>{this.activeIndex=(this.activeIndex+1)%this.navItems.length;this.activateTab(this.activeIndex)},this.loopDuration)}
destroy(){clearInterval(this.interval);this.navItems.forEach(item=>item.classList.remove('dan-looping-tabs__nav-item--active'));this.tabs.forEach(tab=>tab.classList.remove('dan-looping-tabs__tab--active'));this.navItems.forEach(item=>{const loopMask=item.querySelector('.dan-looping-tabs__loop-mask');if(loopMask){gsap.killTweensOf(loopMask);loopMask.removeAttribute('style')}})}
static destroyAllInstances(){LoopingTabs.instances.forEach(instance=>instance.destroy());LoopingTabs.instances=[]}}
function dancepad_looping_tabs(){LoopingTabs.destroyAllInstances();document.querySelectorAll('.dan-looping-tabs').forEach(loopingTabs=>{const instance=new LoopingTabs(loopingTabs);LoopingTabs.instances.push(instance)})}