class ImageRevealV3{static instances=[];constructor(imageReveal){this.imageReveal=imageReveal;this.timeline=null;this.observer=null;this.init()}
init(){this.imageReveal.removeAttribute('data-flickering');const isBreakdance=window.location.href.includes("breakdance_iframe");if(isBreakdance&&this.imageReveal.getAttribute('data-disable-builder')?.includes('1')){return}
const columnWidth=parseFloat(this.imageReveal.getAttribute('data-columns-width'));this.createColumns(this.imageReveal,columnWidth);const heroImageCols=this.imageReveal.querySelectorAll('.dan-image-reveal-v3__col-bg');let triggerElement=this.imageReveal.getAttribute('data-trigger');if(triggerElement==='this')triggerElement=this.imageReveal;const animationType=this.imageReveal.getAttribute("data-animationType");const removeScroll=this.imageReveal.getAttribute("data-remove-scroll")==='1';const triggerClick=this.imageReveal.getAttribute("data-classTriggerClick");const triggerHover=this.imageReveal.getAttribute("data-classTriggerHover");const containerAnimation=this.getHorizontalScrollContainerName(this.imageReveal);this.timeline=gsap.timeline({scrollTrigger:{trigger:triggerElement,start:this.imageReveal.getAttribute('data-start'),end:this.imageReveal.getAttribute('data-end'),scrub:this.parseScrub(this.imageReveal.getAttribute('data-scrub')),toggleActions:this.imageReveal.getAttribute('data-toggle-actions'),containerAnimation:containerAnimation?window[containerAnimation]:undefined}});this.timeline.to(heroImageCols,{width:0,duration:parseFloat(this.imageReveal.getAttribute('data-duration')),delay:parseFloat(this.imageReveal.getAttribute('data-delay')),ease:this.imageReveal.getAttribute('data-ease'),stagger:parseFloat(this.imageReveal.getAttribute('data-stagger'))});if(animationType==="click"&&triggerClick&&parseFloat(triggerClick)!==0){document.querySelectorAll(triggerClick).forEach(el=>el.addEventListener('click',()=>this.timeline.restart()))}
if(animationType==="hover"&&triggerHover&&parseFloat(triggerHover)!==0){document.querySelectorAll(triggerHover).forEach(el=>el.addEventListener('mouseover',()=>this.timeline.restart()))}
if(removeScroll){this.timeline.progress(1)}}
createColumns(el,columnWidth){const columns=Math.ceil(el.offsetWidth/columnWidth);for(let i=1;i<=columns;i++){const div=document.createElement("div");const divBg=document.createElement("div");div.classList.add('dan-image-reveal-v3__col');divBg.classList.add('dan-image-reveal-v3__col-bg');div.appendChild(divBg);el.appendChild(div);gsap.set(div,{width:columnWidth})}}
play(){if(this.timeline.isActive()){this.timeline.play()}else{this.timeline.restart()}}
reverse(){this.timeline.reverse()}
destroy(){if(this.observer)this.observer.disconnect();if(this.timeline?.scrollTrigger){this.timeline.scrollTrigger.kill();this.timeline.kill()}
this.imageReveal.querySelectorAll('.dan-image-reveal-v3__col').forEach(col=>col.remove())}
parseScrub(value){if(value==='0')return!1;if(value==='1')return!0;const num=parseFloat(value);return isNaN(num)?!1:num}
getHorizontalScrollContainerName(element){let containerName=null;document.querySelectorAll('.dan-horizontal-scroll').forEach((scroll,index)=>{if(scroll.contains(element)){containerName=`NextHorizontalScroll${index}`}});return containerName}
static destroyAllInstances(){ImageRevealV3.instances.forEach(instance=>instance.destroy());ImageRevealV3.instances=[]}}
function dancepad_image_reveal_v3(){if(document.querySelector(".dan-site-loader")&&!window.location.href.includes("breakdance_iframe")){return}
ImageRevealV3.destroyAllInstances();document.querySelectorAll('.dan-image-reveal-v3').forEach(imageReveal=>{const instance=new ImageRevealV3(imageReveal);ImageRevealV3.instances.push(instance)})}
function dancepad_image_reveal_v3_site_loader(){ImageRevealV3.destroyAllInstances();document.querySelectorAll('.dan-image-reveal-v3').forEach(imageReveal=>{const instance=new ImageRevealV3(imageReveal);ImageRevealV3.instances.push(instance)})}