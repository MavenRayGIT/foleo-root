class NextSpotlight{constructor(element){this.element=element;this.config={palette:element.getAttribute('data-palette'),gradientColors:element.getAttribute('data-gradient-colors').split('next11').filter(Boolean)};this.init()}
static instances=[];static destroyAll(){NextSpotlight.instances.forEach(instance=>instance.destroy());NextSpotlight.instances=[]}
init(){if(this.config.palette==='custom'){this.setupCustomGradient()}}
getCSSVariableValue(variable){if(variable.startsWith('var(')&&variable.endsWith(')')){const variableName=variable.slice(4,-1).trim();return getComputedStyle(document.documentElement).getPropertyValue(variableName).trim()}
return variable}
setupCustomGradient(){let colors=this.config.gradientColors.map(color=>this.getCSSVariableValue(color));if(colors.length<2){colors=colors.concat(colors)}
const gradientStops=this.calculateGradientStops(colors);const rainbowGradient=`repeating-linear-gradient(100deg, ${gradientStops})`;this.element.style.setProperty('--rainbow',rainbowGradient)}
calculateGradientStops(colors){const totalColors=colors.length;const stepSize=20/totalColors;return colors.map((color,index)=>{const startPercentage=10+index*stepSize;const endPercentage=10+(index+1)*stepSize;const isLast=index===totalColors-1;return `${color} ${startPercentage.toFixed(2)}%, ${color} ${endPercentage.toFixed(2)}%${isLast ? '' : ','}`}).join('')}
destroy(){if(this.config.palette==='custom'){this.element.style.removeProperty('--rainbow')}
this.element=null;this.config=null}}
function dancepad_spotlight(){NextSpotlight.destroyAll();document.querySelectorAll('.dan-spotlight').forEach(element=>{element.removeAttribute('data-flickering');const instance=new NextSpotlight(element);NextSpotlight.instances.push(instance)})}