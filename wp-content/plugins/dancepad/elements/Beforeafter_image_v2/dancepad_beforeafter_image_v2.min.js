class BeforeAfterImageV2{static instances=[];constructor(element,options={}){this.element=element;this.options={initialSliderPercentage:50,slideMode:'hover',...options};this.sliderXPercent=this.options.initialSliderPercentage;this.isDragging=!1;this.isMouseOver=!1;this.slider=element.querySelector('.dan-before-after-image-v2__slider');this.firstImageContainer=element.querySelector('.dan-before-after-image-v2__first-image-container');this.sparklesContainer=element.querySelector('.dan-before-after-image-v2__sparkles-container');this.boundMouseMove=this.handleMouseMove.bind(this);this.boundMouseEnter=this.handleMouseEnter.bind(this);this.boundMouseLeave=this.handleMouseLeave.bind(this);this.boundMouseDown=this.handleMouseDown.bind(this);this.boundMouseUp=this.handleMouseUp.bind(this);this.boundTouchStart=this.handleTouchStart.bind(this);this.boundTouchEnd=this.handleTouchEnd.bind(this);this.boundTouchMove=this.handleTouchMove.bind(this);this.setupEventListeners();this.updateSliderPosition(this.sliderXPercent);this.setupSparkles()}
setupEventListeners(){this.element.addEventListener('mousemove',this.boundMouseMove);this.element.addEventListener('mouseenter',this.boundMouseEnter);this.element.addEventListener('mouseleave',this.boundMouseLeave);this.element.addEventListener('mousedown',this.boundMouseDown);this.element.addEventListener('mouseup',this.boundMouseUp);this.element.addEventListener('touchstart',this.boundTouchStart);this.element.addEventListener('touchend',this.boundTouchEnd);this.element.addEventListener('touchmove',this.boundTouchMove)}
setupSparkles(){const createParticle=()=>{const particle=document.createElement('div');particle.className='dan-before-after-image-v2__particle';const size=Math.random()*2.6+0.4;Object.assign(particle.style,{width:`${size}px`,height:`${size}px`,left:`${Math.random() * 100}%`,top:`${Math.random() * 100}%`});this.sparklesContainer.appendChild(particle);particle.addEventListener('animationend',()=>{particle.remove()})};for(let i=0;i<50;i++)createParticle();this.sparkleInterval=setInterval(createParticle,100)}
updateSliderPosition(percent){this.sliderXPercent=Math.max(0,Math.min(100,percent));this.slider.style.left=`${this.sliderXPercent}%`;this.firstImageContainer.style.clipPath=`inset(0 ${100 - this.sliderXPercent}% 0 0)`}
handleStart(){if(this.options.slideMode==='drag'){this.isDragging=!0}}
handleEnd(){if(this.options.slideMode==='drag'){this.isDragging=!1}}
handleMove(clientX){if(!this.element)return;if(this.options.slideMode==='hover'||(this.options.slideMode==='drag'&&this.isDragging)){const rect=this.element.getBoundingClientRect();const x=clientX-rect.left;const percent=(x/rect.width)*100;requestAnimationFrame(()=>{this.updateSliderPosition(percent)})}}
handleMouseMove(e){this.handleMove(e.clientX)}
handleMouseEnter(){this.isMouseOver=!0}
handleMouseLeave(){this.isMouseOver=!1;if(this.options.slideMode==='hover'){this.updateSliderPosition(this.options.initialSliderPercentage)}
if(this.options.slideMode==='drag'){this.isDragging=!1}}
handleMouseDown(e){this.handleStart(e.clientX)}
handleMouseUp(){this.handleEnd()}
handleTouchStart(e){this.handleStart(e.touches[0].clientX)}
handleTouchEnd(){this.handleEnd()}
handleTouchMove(e){this.handleMove(e.touches[0].clientX)}
destroy(){this.element.removeEventListener('mousemove',this.boundMouseMove);this.element.removeEventListener('mouseenter',this.boundMouseEnter);this.element.removeEventListener('mouseleave',this.boundMouseLeave);this.element.removeEventListener('mousedown',this.boundMouseDown);this.element.removeEventListener('mouseup',this.boundMouseUp);this.element.removeEventListener('touchstart',this.boundTouchStart);this.element.removeEventListener('touchend',this.boundTouchEnd);this.element.removeEventListener('touchmove',this.boundTouchMove);if(this.sparkleInterval)clearInterval(this.sparkleInterval);}
static destroyAllInstances(){BeforeAfterImageV2.instances.forEach(instance=>instance.destroy());BeforeAfterImageV2.instances=[]}}
function dancepad_beforeafter_image_v2(){BeforeAfterImageV2.destroyAllInstances();document.querySelectorAll('.dan-before-after-image-v2').forEach(element=>{element.removeAttribute('data-flickering');const instance=new BeforeAfterImageV2(element,{slideMode:element.getAttribute('data-slider-mode'),initialSliderPercentage:parseFloat(element.getAttribute('data-slider-percentage'))});BeforeAfterImageV2.instances.push(instance)})}