class ReadMore{static instances=[];constructor(element,options={}){this.element=element;this.selectorContainer=options.selectorContainer;this.selectroBtn=options.selectroBtn;this.classOpened='dan-read-more--opened';this.classCanMore='dan-read-more--true';this.inDuration=parseFloat(this.element.getAttribute('data-in-duration'));this.outDuration=parseFloat(this.element.getAttribute('data-out-duration'));this.inEase=this.element.getAttribute('data-in-ease');this.outEase=this.element.getAttribute('data-out-ease');if(this.canBeMore(this.element)){this.element.classList.add(this.classCanMore);const btn=this.element.querySelector(this.selectroBtn);if(btn){btn.setAttribute('data-switch-title',this.element.getAttribute('data-switch-title'));btn.setAttribute('tabindex',0);this.boundClick=this.onClick.bind(this,this.element);this.boundKeyDown=this.onKeyDown.bind(this,this.element);btn.addEventListener('click',this.boundClick);btn.addEventListener('keydown',this.boundKeyDown)}}}
onClick(elem,e){e.preventDefault();const container=elem.querySelector(this.selectorContainer);const btn=e.currentTarget;elem.classList.toggle(this.classOpened);this.changeBtnTitle(btn);if(elem.classList.contains(this.classOpened)){gsap.to(container,{duration:this.inDuration,height:container.scrollHeight+"px",ease:this.inEase})}else{gsap.to(container,{duration:this.outDuration,height:elem.dataset.startHeight+'px',ease:this.outEase})}}
onKeyDown(elem,e){if(e.key==='Enter'){e.preventDefault();this.onClick(elem,e)}}
canBeMore(elem){const container=elem.querySelector(this.selectorContainer);const startHeight=container.offsetHeight;const trueHeight=container.scrollHeight;if(trueHeight>startHeight){elem.dataset.startHeight=startHeight;return!0}
return!1}
changeBtnTitle(btn){const switchTitle=btn.getAttribute('data-switch-title');const currentTitle=btn.innerText;btn.innerText=switchTitle;btn.setAttribute('data-switch-title',currentTitle)}
destroy(){const btn=this.element.querySelector(this.selectroBtn);if(btn&&this.boundClick&&this.boundKeyDown){btn.removeEventListener('click',this.boundClick);btn.removeEventListener('keydown',this.boundKeyDown)}
this.element.classList.remove(this.classCanMore,this.classOpened)}
static destroyAllInstances(){ReadMore.instances.forEach(instance=>instance.destroy());ReadMore.instances=[]}}
function dancepad_read_more(){ReadMore.destroyAllInstances();document.querySelectorAll('.dan-read-more').forEach(readmore=>{const instance=new ReadMore(readmore,{selectorContainer:'.dan-read-more__container',selectroBtn:'.dan-read-more__btn'});ReadMore.instances.push(instance)})}