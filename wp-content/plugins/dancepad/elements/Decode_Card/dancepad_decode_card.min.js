class DanDecodeCard{static instances=[];constructor(cardInner,patternMotion,patternText,randomTextElement){this.cardInner=cardInner;this.patternMotion=patternMotion;this.patternText=patternText;this.randomTextElement=randomTextElement;const card=this.cardInner.closest('.dan-decode-card');this.characters=card.dataset.characters;this.textLength=parseFloat(card.dataset.textLength);this.gradientSize=parseFloat(card.dataset.gradientSize);this.boundHandleMouseMove=this.handleMouseMove.bind(this);this.init();this.bindEvents()}
init(){this.randomTextElement.textContent=this.generateRandomString(this.textLength)}
generateRandomString(length){let result="";for(let i=0;i<length;i++){result+=this.characters.charAt(Math.floor(Math.random()*this.characters.length))}
return result}
handleMouseMove(e){const rect=this.cardInner.getBoundingClientRect();const mouseX=e.clientX-rect.left;const mouseY=e.clientY-rect.top;const maskImage=`radial-gradient(${this.gradientSize}px at ${mouseX}px ${mouseY}px, white, transparent)`;this.patternMotion.style.maskImage=maskImage;this.patternMotion.style.webkitMaskImage=maskImage;this.patternText.style.maskImage=maskImage;this.patternText.style.webkitMaskImage=maskImage;this.randomTextElement.textContent=this.generateRandomString(this.textLength)}
bindEvents(){this.cardInner.addEventListener('mousemove',this.boundHandleMouseMove)}
destroy(){this.cardInner.removeEventListener('mousemove',this.boundHandleMouseMove)}
static destroyAllInstances(){DanDecodeCard.instances.forEach((instance)=>instance.destroy());DanDecodeCard.instances=[]}}
function dancepad_decode_card(){DanDecodeCard.destroyAllInstances();document.querySelectorAll('.dan-decode-card').forEach(card=>{const cardInner=card.querySelector('.dan-decode-card__inner');const patternMotion=card.querySelector('.dan-decode-card__pattern-motion');const patternText=card.querySelector('.dan-decode-card__pattern-text');const randomTextElement=card.querySelector('.dan-decode-card__random-text');const instance=new DanDecodeCard(cardInner,patternMotion,patternText,randomTextElement);DanDecodeCard.instances.push(instance)})}