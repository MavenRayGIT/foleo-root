class DanDistorsionTabs{static instances=[];constructor(element){this.distorsionTabs=element;this.distorsionDuration=parseFloat(this.distorsionTabs.getAttribute('data-duration'));this.distorsionEase=this.distorsionTabs.getAttribute('data-ease');this.activeTab=parseFloat(this.distorsionTabs.getAttribute('data-activetab'))-1;this.event=this.distorsionTabs.getAttribute('data-event');this.svgFilter=this.distorsionTabs.querySelector('#svg-distortion-filter');this.svgFilterTurbulence=this.svgFilter.querySelector('feTurbulence');this.svgFilterDisplacementMap=this.svgFilter.querySelector('feDisplacementMap');this.figures=this.distorsionTabs.querySelector('.dan-distorsion-tabs__tabs');this.figure=this.figures.querySelectorAll('.dan-distorsion-tabs__tab');this.navs=this.distorsionTabs.querySelector('.dan-distorsion-tabs__nav');this.nav=this.navs.querySelectorAll('.dan-distorsion-tabs__nav-item');this.lastActiveItem=this.activeTab;this.boundSetActiveItem=this.setActiveItem.bind(this);this.boundHandleKeydown=this.handleKeydown.bind(this);this.init()}
init(){this.bindEvents();this.setActiveItem(this.activeTab)}
setActiveItem(index){this.figure.forEach((el,i)=>{el.classList.toggle('dan-distorsion-tabs__tab--active',index===i);this.nav[i].classList.toggle('dan-distorsion-tabs__nav-item--active',index===i)});this.makeDisplace();this.lastActiveItem=index}
makeDisplace(){const tl=gsap.timeline();gsap.killTweensOf(this.svgFilterDisplacementMap);tl.set(this.svgFilterTurbulence,{attr:{seed:gsap.utils.random(2,150)}},0);tl.to(this.svgFilterDisplacementMap,{attr:{scale:gsap.utils.random(80,120)},duration:0.2},0);tl.to(this.svgFilterDisplacementMap,{attr:{scale:1},duration:this.distorsionDuration,ease:this.distorsionEase},0.2)}
handleKeydown(e,index){if(e.key==='Enter'){this.setActiveItem(index)}}
bindEvents(){this.nav.forEach((el,index)=>{if(this.event==='hover'){el.addEventListener('mouseenter',()=>this.setActiveItem(index))}else{el.addEventListener('click',()=>this.setActiveItem(index))}
el.addEventListener('keydown',(e)=>this.handleKeydown(e,index))})}
destroy(){this.nav.forEach((el,index)=>{if(this.event==='hover'){el.removeEventListener('mouseenter',()=>this.setActiveItem(index))}else{el.removeEventListener('click',()=>this.setActiveItem(index))}
el.removeEventListener('keydown',(e)=>this.handleKeydown(e,index))});gsap.killTweensOf(this.svgFilterDisplacementMap)}
static destroyAllInstances(){DanDistorsionTabs.instances.forEach((instance)=>instance.destroy());DanDistorsionTabs.instances=[]}}
function dancepad_distorsion_tabs(){DanDistorsionTabs.destroyAllInstances();document.querySelectorAll('.dan-distorsion-tabs').forEach(distorsionTabs=>{const instance=new DanDistorsionTabs(distorsionTabs);DanDistorsionTabs.instances.push(instance)})}