class InteractiveLinesV3{static instances=[];constructor(container){this.container=container;this.magnetContainer=container.querySelector(".dan-interactive-lines-v3__magnet");this.rows=parseFloat(container.getAttribute("data-rows"));this.columns=parseFloat(container.getAttribute("data-columns"));this.pointerMoveHandler=this.updateRotation.bind(this);this.initGrid();this.addListeners();this.initialTrigger();container.removeAttribute("data-flickering")}
initGrid(){this.magnetContainer.innerHTML="";this.magnetContainer.style.gridTemplateRows=`repeat(${this.rows}, 1fr)`;this.magnetContainer.style.gridTemplateColumns=`repeat(${this.columns}, 1fr)`;const total=this.rows*this.columns;for(let i=0;i<total;i++){const span=document.createElement("span");this.magnetContainer.appendChild(span)}}
updateRotation(pointer){const spans=this.container.querySelectorAll(".dan-interactive-lines-v3__magnet span");spans.forEach(item=>{const rect=item.getBoundingClientRect();const centerX=rect.x+rect.width/2;const centerY=rect.y+rect.height/2;const dx=pointer.x-centerX;const dy=pointer.y-centerY;const dist=Math.sqrt(dx*dx+dy*dy)||1;const angle=((Math.acos(dx/dist)*180)/Math.PI)*(pointer.y>centerY?1:-1);item.style.setProperty("--rotate",`${angle}deg`)})}
initialTrigger(){setTimeout(()=>{const items=this.container.querySelectorAll(".dan-interactive-lines-v3__magnet span");const middle=items[Math.floor(items.length/2)].getBoundingClientRect();this.updateRotation({x:middle.x,y:middle.y})},300)}
addListeners(){window.addEventListener("pointermove",this.pointerMoveHandler)}
destroy(){window.removeEventListener("pointermove",this.pointerMoveHandler)}
static destroyAllInstances(){InteractiveLinesV3.instances.forEach(instance=>instance.destroy());InteractiveLinesV3.instances=[]}}
function dancepad_interactive_lines_v3(){InteractiveLinesV3.destroyAllInstances();const isBreakdance=window.location.href.includes("breakdance_iframe");document.querySelectorAll('.dan-interactive-lines-v3').forEach(container=>{container.removeAttribute("data-flickering");if(isBreakdance&&container.getAttribute('data-disable-builder')==='1')return;const instance=new InteractiveLinesV3(container);InteractiveLinesV3.instances.push(instance)})}