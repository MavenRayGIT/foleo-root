class InteractiveLinesV2{static instances=[];constructor(element){this.element=element;this.canvas=element.querySelector(".dan-interactive-lines-v2__canvas");this.ctx=this.canvas.getContext("2d");this.ball=element.querySelector(".dan-interactive-lines-v2__ball");this.spacing=parseFloat(element.getAttribute("data-spacing"));this.strokeLength=parseFloat(element.getAttribute("data-stroke-length"));this.strokeWidth=parseFloat(element.getAttribute("data-stroke-width"));this.duration=parseFloat(element.getAttribute("data-duration"));this.ease=element.getAttribute("data-ease");this.cols=Math.floor(this.element.offsetWidth/this.spacing);this.rows=Math.floor(this.element.offsetHeight/this.spacing);this.canvas.width=this.cols*this.spacing;this.canvas.height=this.rows*this.spacing;this.mouseMoveHandler=this.onMouseMove.bind(this);this.element.addEventListener("mousemove",this.mouseMoveHandler);this.draw()}
snapToGrid(x,y){return{x:Math.round(x/this.spacing)*this.spacing,y:Math.round(y/this.spacing)*this.spacing,}}
onMouseMove(e){const rect=this.canvas.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;const{x:snapX,y:snapY}=this.snapToGrid(x,y);gsap.to(this.ball,{x:snapX,y:snapY,duration:this.duration,ease:this.ease,onUpdate:()=>this.draw(),})}
draw(){const ctx=this.ctx;ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const ballRect=this.ball.getBoundingClientRect();const canvasRect=this.canvas.getBoundingClientRect();const ballX=ballRect.left-canvasRect.left+ballRect.width/2;const ballY=ballRect.top-canvasRect.top+ballRect.height/2;for(let col=0;col<=this.cols;col++){for(let row=0;row<=this.rows;row++){const pointX=col*this.spacing;const pointY=row*this.spacing;const dx=ballX-pointX;const dy=ballY-pointY;const distance=Math.sqrt(dx*dx+dy*dy);if(distance<15)continue;const angle=Math.atan2(dy,dx);ctx.beginPath();ctx.moveTo(pointX,pointY);ctx.lineTo(pointX+Math.cos(angle)*this.strokeLength,pointY+Math.sin(angle)*this.strokeLength);ctx.strokeStyle=getComputedStyle(this.element).getPropertyValue('--lines-color');ctx.lineWidth=this.strokeWidth;ctx.stroke()}}}
destroy(){this.element.removeEventListener("mousemove",this.mouseMoveHandler);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}
static destroyAllInstances(){InteractiveLinesV2.instances.forEach(instance=>instance.destroy());InteractiveLinesV2.instances=[]}}
function dancepad_interactive_lines_v2(){InteractiveLinesV2.destroyAllInstances();const isBreakdance=window.location.href.includes("breakdance_iframe");document.querySelectorAll('.dan-interactive-lines-v2').forEach(element=>{if(isBreakdance&&element.getAttribute('data-disable-builder')==='1')return;const instance=new InteractiveLinesV2(element);InteractiveLinesV2.instances.push(instance)})}