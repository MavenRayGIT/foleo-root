class NextInteractiveDivider{constructor(element){this.container=element;this.box=element.querySelector('.dan-interactive-divider__box');this.svg=element.querySelector('.dan-interactive-divider__svg');this.path=element.querySelector('.dan-interactive-divider__path');this.state={progress:0,x:0.5,time:Math.PI/2,reqId:null};this.config={maxBendIntensity:this.validateBendIntensity(this.getLastValue(element.getAttribute('data-bend-intensity')))};this.manageMouseEnter=this.manageMouseEnter.bind(this);this.manageMouseMove=this.manageMouseMove.bind(this);this.manageMouseLeave=this.manageMouseLeave.bind(this);this.init()}
static instances=[];static destroyAll(){NextInteractiveDivider.instances.forEach(instance=>instance.destroy());NextInteractiveDivider.instances=[]}
validateBendIntensity(value){const parsed=parseFloat(value);if(isNaN(parsed)||!isFinite(parsed)){return 100}
return parsed}
validateNumber(value,fallback=0){return isNaN(value)||!isFinite(value)?fallback:value}
getLastValue(str){if(typeof str!=='string')return str;const values=str.split(' ').filter(Boolean);return values[values.length-1]||str}
lerp(x,y,a){return x*(1-a)+y*a}
getDimensions(){if(!this.container||!this.svg){return{width:0,midY:0}}
const width=this.validateNumber(this.container.clientWidth,0);const height=this.validateNumber(this.svg.clientHeight,0);const midY=height/2;return{width,midY}}
setPath(progress){if(!this.path)return;const{width,midY}=this.getDimensions();if(width===0||midY===0)return;const validX=this.validateNumber(this.state.x,0.5);this.state.x=Math.max(0,Math.min(1,validX));const validProgress=this.validateNumber(progress,0);const controlX=width*this.state.x;const controlY=midY+validProgress;const pathData=`M0 ${midY} Q${controlX} ${controlY}, ${width} ${midY}`;try{this.path.setAttribute('d',pathData)}catch(error){console.warn('Failed to set path:',error);this.path.setAttribute('d',`M0 ${midY} L${width} ${midY}`)}}
manageMouseEnter(){if(this.state.reqId){cancelAnimationFrame(this.state.reqId);this.resetAnimation()}}
manageMouseMove(e){if(!this.path||!this.container)return;const{movementY,clientX}=e;const pathBound=this.path.getBoundingClientRect();const pathWidth=pathBound.width||1;const newX=(clientX-pathBound.left)/pathWidth;this.state.x=Math.max(0,Math.min(1,newX));const movement=this.validateNumber(movementY,0);const intensity=this.validateNumber(this.config.maxBendIntensity,100);this.state.progress+=(movement*intensity)/100;this.setPath(this.state.progress)}
manageMouseLeave(){this.animateOut()}
animateOut=()=>{if(!this.path)return;const newProgress=this.validateNumber(this.state.progress*Math.sin(this.state.time),0);this.state.progress=this.lerp(this.state.progress,0,0.025);this.state.time+=0.2;this.setPath(newProgress);if(Math.abs(this.state.progress)>0.75){this.state.reqId=requestAnimationFrame(this.animateOut)}else{this.resetAnimation()}}
resetAnimation(){this.state.time=Math.PI/2;this.state.progress=0;this.setPath(0);this.state.reqId=null}
bindEvents(){if(this.box){this.box.addEventListener('mouseenter',this.manageMouseEnter);this.box.addEventListener('mousemove',this.manageMouseMove);this.box.addEventListener('mouseleave',this.manageMouseLeave)}}
init(){this.bindEvents();this.setPath(0)}
destroy(){if(this.state.reqId){cancelAnimationFrame(this.state.reqId)}
if(this.box){this.box.removeEventListener('mouseenter',this.manageMouseEnter);this.box.removeEventListener('mousemove',this.manageMouseMove);this.box.removeEventListener('mouseleave',this.manageMouseLeave)}
if(this.path){const{width,midY}=this.getDimensions();this.path.setAttribute('d',`M0 ${midY} L${width} ${midY}`)}
this.container=null;this.box=null;this.svg=null;this.path=null;this.state=null;this.config=null}}
function dancepad_interactive_divider(){NextInteractiveDivider.destroyAll();document.querySelectorAll('.dan-interactive-divider').forEach(element=>{const instance=new NextInteractiveDivider(element);NextInteractiveDivider.instances.push(instance)})}