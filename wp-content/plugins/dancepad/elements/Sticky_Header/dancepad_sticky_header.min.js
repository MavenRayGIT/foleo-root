class NextStickyHeader{constructor(element){this.header=element;this.burger=element.querySelector('.dan-burger').querySelector('button');this.itemsWrapper=element.querySelector('.dan-sticky-header__items-wrapper');this.isMenuOpen=!1;this.isSticky=!1;this.lastScrollY=0;this.config=this.initConfig();this.toggleMenu=this.toggleMenu.bind(this);this.handleEscKey=this.handleEscKey.bind(this);this.handleScroll=this.handleScroll.bind(this);this.init()}
static instances=[];static destroyAll(){NextStickyHeader.instances.forEach(instance=>instance.destroy());NextStickyHeader.instances=[]}
initConfig(){return{enableOffset:this.header.getAttribute('data-enableoffset')==='1',offset:parseFloat(this.header.getAttribute('data-offset')),navStyleOffset:parseFloat(this.header.getAttribute('data-navstyleoffset')),goUpwards:this.header.getAttribute('data-goupwards')==='1',breakpoint:this.header.getAttribute('data-breakpoint'),enableMobileMenu:this.header.getAttribute('data-enable-mobile-menu')==='1'}}
init(){this.bindEvents();if(window.location.href.includes('breakdance_iframe')){this.setupMobileBreakpoint()}}
setupMobileBreakpoint(){if(!this.config.enableMobileMenu||!this.config.breakpoint)return;const mediaQuery=window.matchMedia(`(max-width: ${this.config.breakpoint}px)`)}
toggleMenu(){if(!this.itemsWrapper)return;this.isMenuOpen=!this.isMenuOpen;this.itemsWrapper.classList.toggle('dan-sticky-header__items-wrapper--show');if(this.burger){const button=this.burger.querySelector('button');if(button){const buttonClass=button.classList[0];const openedClass=buttonClass?`${buttonClass}--opened`:'';button.classList.toggle(openedClass);button.setAttribute('aria-expanded',this.isMenuOpen.toString())}}}
handleScroll(){const currentScroll=window.scrollY;if(this.config.enableOffset){if(currentScroll>this.lastScrollY){if(currentScroll>this.config.offset){this.header.setAttribute('data-sticky','dan-sticky-header--sticky');this.isSticky=!0}}else if(this.isSticky&&currentScroll<=this.config.offset){this.header.removeAttribute('data-sticky');this.isSticky=!1}else if(this.config.goUpwards&&this.isSticky&&(currentScroll<=this.config.offset||currentScroll<this.lastScrollY)){this.header.removeAttribute('data-sticky');this.isSticky=!1}
this.lastScrollY=currentScroll}
if(currentScroll>=this.config.navStyleOffset){this.header.classList.add('dan-sticky-header--scroll-start')}else{this.header.classList.remove('dan-sticky-header--scroll-start')}}
handleEscKey(event){if(this.isMenuOpen&&event.key==='Escape'){this.toggleMenu()}}
bindEvents(){window.addEventListener('scroll',this.handleScroll);document.addEventListener('keydown',this.handleEscKey);if(this.burger){this.burger.addEventListener('click',this.toggleMenu)}}
destroy(){window.removeEventListener('scroll',this.handleScroll);document.removeEventListener('keydown',this.handleEscKey);if(this.burger){this.burger.removeEventListener('click',this.toggleMenu)}
if(this.isMenuOpen){this.itemsWrapper?.classList.remove('dan-sticky-header__items-wrapper--show');const button=this.burger?.querySelector('button');if(button){const buttonClass=button.classList[0];const openedClass=buttonClass?`${buttonClass}--opened`:'';button.classList.remove(openedClass);button.setAttribute('aria-expanded','false')}}
this.header.removeAttribute('data-sticky');this.header.classList.remove('dan-sticky-header--scroll-start');this.itemsWrapper?.classList.remove('dan-sticky-header__items-wrapper--hide');this.header=null;this.burger=null;this.itemsWrapper=null}}
function dancepad_sticky_header(){NextStickyHeader.destroyAll();document.querySelectorAll('.dan-sticky-header').forEach(element=>{const instance=new NextStickyHeader(element);NextStickyHeader.instances.push(instance)})}