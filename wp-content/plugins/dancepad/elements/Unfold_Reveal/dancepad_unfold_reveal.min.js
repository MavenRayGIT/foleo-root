class NextUnfoldReveal{static instances=[];constructor(element){Object.assign(this,{element,inner:element.querySelector(".dan-unfold-reveal__inner"),start:element.getAttribute("data-start"),end:element.getAttribute("data-end"),ease:element.getAttribute("data-easing"),duration:parseFloat(element.getAttribute("data-duration")),splitType:element.getAttribute("data-split"),stagger:parseFloat(element.getAttribute("data-stagger")),delay:parseFloat(element.getAttribute("data-delay")),trigger:element.getAttribute("data-trigger")==="this"?element:element.getAttribute("data-trigger"),toggleActions:element.getAttribute("data-toggleactions"),scrub:element.getAttribute("data-scrub")==="1",additionalTriggers:element.getAttribute("data-additional_triggers"),triggerElement:element.getAttribute("data-element"),intensity:parseFloat(element.getAttribute("data-intensity")),direction:element.getAttribute("data-direction"),eventListeners:[]});this.rotationY=this.direction==="left"?90:-90;this.transformOrigin=this.direction==="left"?"0% 50%":"100% 50%";this.staggerFrom=this.direction==="left"?"start":"end";this.initialize()}
initialize(){if(!this.inner)return;const content=this.inner.getAttribute('data-content');if(!content)return;this.inner.innerHTML=content;this.createSplitText();this.createAnimation();this.setupAdditionalTriggers()}
createSplitText(){this.splitText=new SplitText(this.inner,{type:"words, chars",charsClass:"char",wordsClass:"word"});this.words=this.inner.querySelectorAll(".word");this.chars=this.inner.querySelectorAll(".char")}
createAnimation(){const containerName=[...document.querySelectorAll(".dan-horizontal-scroll")].findIndex(scroll=>scroll.contains(this.element))!==-1?`NextHorizontalScroll${[...document.querySelectorAll(".dan-horizontal-scroll")]
                    .findIndex(scroll => scroll.contains(this.element))}`:undefined;const fromConfig={willChange:"opacity, transform",transformOrigin:this.transformOrigin,opacity:0,rotationY:this.rotationY,z:this.intensity};const toConfig={ease:this.ease,opacity:1,delay:this.delay,duration:this.duration,rotationY:0,z:0,stagger:{each:this.stagger,from:this.staggerFrom}};const timelineConfig={scrollTrigger:{trigger:this.trigger,containerAnimation:containerName?window[containerName]:undefined,start:this.start,end:this.end,toggleActions:this.toggleActions,scrub:this.scrub,}};if(this.splitType==="chars"){this.chars.forEach(char=>gsap.set(char.parentNode,{perspective:2000}));this.animation=gsap.timeline(timelineConfig).fromTo(this.chars,fromConfig,toConfig)}else if(this.splitType==="words"){this.words.forEach(word=>{const chars=word.querySelectorAll(".char");chars.forEach(char=>gsap.set(char.parentNode,{perspective:2000}))});this.animation=gsap.timeline(timelineConfig).fromTo(this.chars,fromConfig,toConfig)}}
setupAdditionalTriggers(){if(this.additionalTriggers&&this.triggerElement){const eventType=this.additionalTriggers.includes('click')?'click':'mouseover';[...document.querySelectorAll(this.triggerElement)].forEach(el=>{const listener=()=>this.animation.restart();el.addEventListener(eventType,listener);this.eventListeners.push({element:el,type:eventType,listener})})}}
destroy(){if(this.animation?.scrollTrigger){this.animation.scrollTrigger.kill()}
if(this.animation){this.animation.kill()}
if(this.splitText){this.splitText.revert();this.words=null;this.chars=null}
this.eventListeners.forEach(({element,type,listener})=>{element.removeEventListener(type,listener)});this.eventListeners=[];if(this.inner){const originalContent=this.inner.getAttribute('data-content')||'';this.inner.innerHTML=originalContent}}
static destroyAll(){NextUnfoldReveal.instances.forEach(instance=>instance.destroy());NextUnfoldReveal.instances=[]}}
const dancepad_unfold_reveal=()=>{gsap.registerPlugin(ScrollTrigger);NextUnfoldReveal.destroyAll();const instances=[];const animations={};document.querySelectorAll(".dan-unfold-reveal").forEach((element,index)=>{element.removeAttribute('data-flickering');const instance=new NextUnfoldReveal(element);instances.push(instance);animations[`anim${index}`]=instance.animation});NextUnfoldReveal.instances=instances;return animations}