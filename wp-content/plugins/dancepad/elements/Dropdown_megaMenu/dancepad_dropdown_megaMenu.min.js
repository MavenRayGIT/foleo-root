class NextDropdownMegaMenu{constructor(element){this.menu=element;this.burger=element.querySelector(".dan-burger")?element.querySelector(".dan-burger").querySelector("button"):null;this.dropdownsWrapper=element.querySelector(".dan-dropdown-mega-menu__dropdowns-wrapper");this.mediaQuery=null;this.config=this.initConfig();this.toggleMenu=this.toggleMenu.bind(this);this.handleResize=this.handleResize.bind(this);this.checkAndAddResponsiveAttribute=this.checkAndAddResponsiveAttribute.bind(this);this.init()}
static instances=[];static destroyAll(){NextDropdownMegaMenu.instances.forEach((instance)=>instance.destroy());NextDropdownMegaMenu.instances=[]}
initConfig(){return{enableMobileMenu:this.menu.getAttribute("data-enablemobilemenu")==="1",displayBuilderResponsive:this.menu.getAttribute("data-displaybuilderresponsive")==="1",breakpoint:this.menu.getAttribute("data-breakpoint")}}
init(){this.bindEvents();if(this.config.isPreviewMode&&this.config.enableMobileMenu){this.initResponsiveMode()}}
initResponsiveMode(){this.checkAndAddResponsiveAttribute();window.addEventListener("resize",this.handleResize)}
toggleMenu(){if(this.dropdownsWrapper){this.dropdownsWrapper.toggleAttribute("data-toggle")}}
handleResize(){this.checkAndAddResponsiveAttribute()}
checkAndAddResponsiveAttribute(){if(!this.config.breakpoint)return;if(!this.mediaQuery){this.mediaQuery=window.matchMedia(`(max-width: ${this.config.breakpoint}px)`)}
if(this.mediaQuery.matches){if(this.config.enableMobileMenu){this.menu.setAttribute("data-toggled-enable-mobile-menu","")}
if(this.config.displayBuilderResponsive){this.menu.setAttribute("data-toggled-display-builder","")}}else{this.menu.removeAttribute("data-toggled-enable-mobile-menu");this.menu.removeAttribute("data-toggled-display-builder")}}
bindEvents(){if(this.burger){this.burger.addEventListener("click",this.toggleMenu)}}
destroy(){this.burger?.removeEventListener("click",this.toggleMenu);window.removeEventListener("resize",this.handleResize);if(this.dropdownsWrapper&&this.dropdownsWrapper.hasAttribute("data-toggle")){this.dropdownsWrapper.removeAttribute("data-toggle")}
this.menu.removeAttribute("data-toggled-enable-mobile-menu");this.menu.removeAttribute("data-toggled-display-builder");this.menu=null;this.burger=null;this.dropdownsWrapper=null;this.mediaQuery=null}}
function dancepad_dropdown_mega_menu(){NextDropdownMegaMenu.destroyAll();document.querySelectorAll(".dan-dropdown-mega-menu").forEach((element)=>{const instance=new NextDropdownMegaMenu(element);NextDropdownMegaMenu.instances.push(instance)})}