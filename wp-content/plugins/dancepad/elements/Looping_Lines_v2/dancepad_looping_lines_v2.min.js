class DanLoopingLinesV2{static instances=[];constructor(options={}){this.settings=options;Object.assign(this.settings);this.currentWordIndex=0;this.wordContainer=this.settings.wordElement;this.animatedContainer=this.settings.containerElement;this.splitText=null;this.animations=[];this.init()}
getWordWidth(word){const temp=document.createElement('div');temp.style.position='absolute';temp.style.visibility='hidden';temp.style.whiteSpace='nowrap';const styles=window.getComputedStyle(this.wordContainer);temp.style.fontSize=styles.fontSize;temp.style.fontFamily=styles.fontFamily;temp.style.fontWeight=styles.fontWeight;temp.style.letterSpacing=styles.letterSpacing;temp.textContent=word;document.body.appendChild(temp);const width=temp.offsetWidth;document.body.removeChild(temp);return width}
getHorizontalPadding(){const styles=getComputedStyle(this.animatedContainer);const paddingLeft=parseInt(styles.getPropertyValue('--padding-left'));const paddingRight=parseInt(styles.getPropertyValue('--padding-right'));return paddingLeft+paddingRight}
getVerticalPadding(){const styles=getComputedStyle(this.animatedContainer);const paddingTop=parseInt(styles.getPropertyValue('--padding-top'));const paddingBottom=parseInt(styles.getPropertyValue('--padding-bottom'));return paddingTop+paddingBottom}
getWordHeight(){const temp=document.createElement('div');temp.style.position='absolute';temp.style.visibility='hidden';const styles=window.getComputedStyle(this.wordContainer);temp.style.fontSize=styles.fontSize;temp.style.fontFamily=styles.fontFamily;temp.style.fontWeight=styles.fontWeight;temp.style.lineHeight=styles.lineHeight;temp.textContent='Xy';document.body.appendChild(temp);const height=temp.offsetHeight;document.body.removeChild(temp);return height}
animateWord(word){const horizontalPadding=this.getHorizontalPadding();const verticalPadding=this.getVerticalPadding();const nextWidth=this.getWordWidth(word)+horizontalPadding;const nextHeight=this.getWordHeight()+verticalPadding;this.wordContainer.textContent=word;this.splitText=new SplitText(this.wordContainer,{type:"chars"});gsap.set(this.splitText.chars,{y:50,opacity:0});const containerAnim=gsap.to(this.animatedContainer,{width:nextWidth,height:nextHeight,duration:this.settings.containerAnimation.duration,ease:this.settings.containerAnimation.ease,});const charsAnim=gsap.to(this.splitText.chars,{duration:this.settings.letterAnimation.duration,y:0,opacity:1,stagger:this.settings.letterAnimation.stagger,ease:this.settings.letterAnimation.ease,delay:this.settings.containerAnimation.duration/2,onComplete:()=>{const exitAnim=gsap.to(this.splitText.chars,{duration:this.settings.letterAnimation.duration,y:this.settings.letterAnimation.y,opacity:this.settings.letterAnimation.opacity,stagger:this.settings.letterAnimation.stagger,ease:this.settings.letterAnimation.ease,delay:this.settings.displayDuration,onComplete:()=>{if(this.splitText){this.splitText.revert()}
this.currentWordIndex=(this.currentWordIndex+1)%this.settings.words.length;this.animateWord(this.settings.words[this.currentWordIndex])}});this.animations.push(exitAnim)}});this.animations.push(containerAnim,charsAnim)}
init(){const initialPadding=this.getHorizontalPadding();const initialVerticalPadding=this.getVerticalPadding();this.animatedContainer.style.width=this.getWordWidth(this.settings.words[0])+initialPadding+'px';this.animatedContainer.style.height=this.getWordHeight()+initialVerticalPadding+'px';this.wordContainer.textContent=this.settings.words[0];this.animateWord(this.settings.words[0])}
destroy(){if(this.splitText){this.splitText.revert()}
this.animations.forEach(animation=>{if(animation){animation.kill()}})}
static destroyAllInstances(){DanLoopingLinesV2.instances.forEach((instance)=>instance.destroy());DanLoopingLinesV2.instances=[]}}
function dancepad_looping_lines_v2(){DanLoopingLinesV2.destroyAllInstances();document.querySelectorAll('.dan-looping-lines-v2').forEach((titleElement)=>{const words=titleElement.getAttribute('data-lines').split('dan11').filter(word=>word!=='');const boxDuration=parseFloat(titleElement.getAttribute('data-box-duration'));const boxEase=titleElement.getAttribute('data-box-ease');const lineDuration=parseFloat(titleElement.getAttribute('data-line-duration'));const letterEase=titleElement.getAttribute('data-letter-ease');const letterDuration=parseFloat(titleElement.getAttribute('data-letter-duration'));const letterStagger=parseFloat(titleElement.getAttribute('data-letter-stagger'));const loopingLines=new DanLoopingLinesV2({words:words,containerElement:titleElement.querySelector('.dan-looping-lines-v2__animated-container'),wordElement:titleElement.querySelector('.dan-looping-lines-v2__word'),containerAnimation:{duration:boxDuration,ease:boxEase,},letterAnimation:{y:'-100%',opacity:0,duration:letterDuration,ease:letterEase,stagger:letterStagger},displayDuration:lineDuration});DanLoopingLinesV2.instances.push(loopingLines)})}