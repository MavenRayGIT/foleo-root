class NextBackToTop{constructor(element){this.button=element;this.circlePath=element.querySelector('.dan-back-to-top__circle-path');this.pathLength=this.circlePath.getTotalLength();this.config={speed:element.getAttribute('data-speed'),ease:element.getAttribute('data-ease'),backEasing:element.getAttribute('data-back-easing'),backDuration:parseFloat(element.getAttribute('data-back-duration')),entranceDistance:parseFloat(element.getAttribute('data-entrance-distance')),scrollToPixel:parseFloat(element.getAttribute('data-scroll-to-pixel'))};this.updateProgress=this.updateProgress.bind(this);this.scrollToTop=this.scrollToTop.bind(this);this.handleClick=this.handleClick.bind(this);this.init()}
static instances=[];static destroyAll(){NextBackToTop.instances.forEach(instance=>instance.destroy());NextBackToTop.instances=[]}
init(){this.circlePath.style.strokeDasharray=`${this.pathLength} ${this.pathLength}`;this.circlePath.style.strokeDashoffset=this.pathLength;this.circlePath.style.transition=`stroke-dashoffset ${this.config.speed}ms ${this.config.ease}`;this.updateProgress();this.bindEvents()}
updateProgress(){const scrollPercent=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight);const drawLength=this.pathLength-scrollPercent*this.pathLength;this.circlePath.style.strokeDashoffset=drawLength;if(window.scrollY>this.config.entranceDistance){this.button.classList.add('dan-back-to-top__active-progress')}else{this.button.classList.remove('dan-back-to-top__active-progress')}}
scrollToTop(){gsap.to(window,{duration:this.config.backDuration/1000,scrollTo:{y:this.config.scrollToPixel},ease:this.config.backEasing})}
handleClick(e){e.stopImmediatePropagation();this.scrollToTop()}
bindEvents(){window.addEventListener('scroll',this.updateProgress);this.button.addEventListener('click',this.handleClick)}
destroy(){window.removeEventListener('scroll',this.updateProgress);this.button.removeEventListener('click',this.handleClick);this.circlePath.style.strokeDasharray='';this.circlePath.style.strokeDashoffset='';this.circlePath.style.transition='';this.button.classList.remove('dan-back-to-top__active-progress');this.button=null;this.circlePath=null}}
function dancepad_back_to_top(){NextBackToTop.destroyAll();document.querySelectorAll('.dan-back-to-top').forEach(element=>{element.removeAttribute('data-flickering');const instance=new NextBackToTop(element);NextBackToTop.instances.push(instance)})}