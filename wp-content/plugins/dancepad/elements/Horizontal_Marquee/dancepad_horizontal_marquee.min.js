class NextMarqueeElement{constructor(marquee,index){this.marquee=marquee;this.element=marquee.querySelector(".dan-horizontal-marquee__element");this.index=index+1;this.isPreview=window.location.href.includes("breakdance_iframe");this.reelInstance=null;this.observer=null;this.config=this.initConfig();this.init()}
static instances=[];static destroyAll(){NextMarqueeElement.instances.forEach((instance)=>instance.destroy());NextMarqueeElement.instances=[]}
initConfig(){return{className:`dan-horizontal-marquee__element${this.index}`,speed:parseFloat(this.marquee.getAttribute("data-speed-duration")),defaultLoop:this.marquee.getAttribute("data-defaultloop")==="1",defaultReverse:this.marquee.getAttribute("data-defaultreverse")==="1",pauseOnHover:this.marquee.getAttribute("data-pauseonhover")==="1",ease:this.marquee.getAttribute("data-ease"),buildEdit:this.marquee.getAttribute("data-builderedit")==="1"&&this.isPreview,scroller:{enabled:this.marquee.getAttribute("data-scroller")==="1",speed:parseFloat(this.marquee.getAttribute("data-scrollerspeed")),multiplier:parseFloat(this.marquee.getAttribute("data-multiplier")),threshold:parseFloat(this.marquee.getAttribute("data-threshold")),bothDirection:this.marquee.getAttribute("data-bothdirection")==="1",ease:this.marquee.getAttribute("data-scrollerease"),},}}
init(){this.setupElement();this.initReel();this.setupScroller();this.setupHoverEvents();this.setupPreviewObserver()}
setupElement(){this.element.classList.add(this.config.className)}
initReel(){this.reelInstance=new Reeller.Reeller({container:`.${this.config.className}`,wrapper:".dan-horizontal-marquee__wrapper",itemSelector:".dan-horizontal-marquee__item",speed:this.config.speed,cloneClassName:"-clone",clonesMin:0,clonesOverflow:!0,clonesFinish:!1,ease:this.config.ease,loop:this.config.defaultLoop,paused:this.config.buildEdit,reversed:this.config.defaultReverse,autoStop:!1,autoUpdate:!0,initialSeek:10,})}
setupScroller(){if(this.config.scroller.enabled){new Reeller.ScrollerPlugin(this.reelInstance,{speed:this.config.scroller.speed,multiplier:this.config.scroller.multiplier,threshold:this.config.scroller.threshold,reversed:this.config.defaultReverse,bothDirection:this.config.scroller.bothDirection,ease:this.config.scroller.ease,overwrite:!0,stopOnEnd:!1,scrollProxy:null,})}}
setupHoverEvents(){if(!this.config.pauseOnHover)return;const wrapper=this.reelInstance.filler.wrapper;const container=this.reelInstance.filler.container;wrapper.addEventListener("mouseenter",()=>this.reelInstance.pause());wrapper.addEventListener("mouseleave",()=>this.reelInstance.resume());if(this.config.scroller.enabled){container.addEventListener("mouseleave",()=>{const timeScale=this.config.defaultReverse?-1:1;this.reelInstance.tl.timeScale(timeScale)})}}
setupPreviewObserver(){if(!this.isPreview)return;const item=this.element.querySelector(".dan-horizontal-marquee__item:not(.-clone):not(:has(.dan-arc-title))");if(!item)return;this.observer=new MutationObserver(()=>this.reelInstance.update());this.observer.observe(item,{childList:!0,subtree:!0})}
destroy(){if(this.observer){this.observer.disconnect()}
if(this.reelInstance){this.reelInstance.destroy?.()}
this.element.classList.remove(this.config.className);this.element=null;this.reelInstance=null;this.observer=null}}
function dancepad_horizontal_marquee(){NextMarqueeElement.destroyAll();document.querySelectorAll(".dan-horizontal-marquee").forEach((marquee,index)=>{marquee.removeAttribute("data-flickering");const instance=new NextMarqueeElement(marquee,index);NextMarqueeElement.instances.push(instance)});initializeHorizontalMarqueeObserver()}
function initializeHorizontalMarqueeObserver(){const breakdanceCanvas=document.querySelector('#breakdance_canvas');if(!breakdanceCanvas)return;const observer=new MutationObserver((mutations)=>{for(const mutation of mutations){if(mutation.type==='childList'){const hasChanges=[...mutation.addedNodes,...mutation.removedNodes].some(node=>node.classList&&(!node.classList.contains('dan-horizontal-marquee__item')));if(hasChanges){
dancepad_horizontal_marquee();break}}}});const sliderElements=document.querySelectorAll('.dan-horizontal-marquee');sliderElements.forEach(element=>{observer.observe(element,{childList:!0,subtree:!0})});return observer}