class NextScrollReading{static instances=[];constructor(element){Object.assign(this,{element,start:element.getAttribute("data-start"),duration:parseFloat(element.getAttribute("data-duration")),end:element.getAttribute("data-end"),type:element.getAttribute("data-type"),scroller:element.getAttribute("data-scroller"),splitTexts:[],windowWidth:window.innerWidth,lines:[],words:[],chars:[]});this.initialize()}
initialize(){this.updateContent();this.createSplitText();this.createAnimations();this.setupResizeListener()}
updateContent(){const content=this.element.getAttribute('data-content');if(content){this.element.innerHTML=content}}
createSplitText(){this.splitTexts.forEach(split=>split.revert());this.splitTexts=[];const splitText=new SplitText(this.element,{type:"lines, words, chars",linesClass:"line",wordsClass:"word",charsClass:"char"});this.lines=splitText.lines;this.words=splitText.words;this.chars=splitText.chars;this.splitTexts.push(splitText);this.addMasks(this.getTargetElements())}
getTargetElements(){switch(this.type){case "lines":return this.lines;case "words":return this.words;case "chars":return this.chars;default:return[]}}
addMasks(elements){elements.forEach(element=>{const mask=document.createElement("div");mask.className="dan-scroll-reading__line-mask";element.appendChild(mask)})}
createAnimations(){const elements=this.getTargetElements();elements.forEach(element=>{gsap.timeline({scrollTrigger:{trigger:element,start:this.start,end:this.end,scrub:this.duration,scroller:this.scroller}}).to(element.querySelector(".dan-scroll-reading__line-mask"),{width:"0%",duration:1})})}
setupResizeListener(){this.resizeHandler=()=>{if(this.windowWidth!==window.innerWidth){this.windowWidth=window.innerWidth;this.refresh()}};window.addEventListener("resize",this.resizeHandler)}
refresh(){this.splitTexts.forEach(split=>split.revert());this.splitTexts=[];ScrollTrigger.killAll();this.updateContent();this.createSplitText();this.createAnimations()}
destroy(){window.removeEventListener("resize",this.resizeHandler);this.splitTexts.forEach(split=>split.revert());ScrollTrigger.getAll().forEach(st=>{if(st.vars.trigger.closest('.dan-scroll-reading__element')===this.element){st.kill()}});this.updateContent()}
static destroyAll(){NextScrollReading.instances.forEach(instance=>instance.destroy());NextScrollReading.instances=[]}}
const dancepad_scroll_reading=()=>{gsap.registerPlugin(ScrollTrigger);NextScrollReading.destroyAll();document.querySelectorAll(".dan-scroll-reading__element").forEach(element=>{element.removeAttribute('data-flickering');NextScrollReading.instances.push(new NextScrollReading(element))})}