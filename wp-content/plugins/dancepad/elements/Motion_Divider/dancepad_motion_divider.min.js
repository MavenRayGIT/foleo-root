class NextDivider{constructor(element,index){this.element=element;this.motionElement=element.querySelector(".dan-motion-divider__motion");this.timeline=null;this.index=index;this.config=this.initConfig();this.init()}
static instances=[];static destroyAll(){NextDivider.instances.forEach((instance)=>instance.destroy());NextDivider.instances=[]}
initConfig(){const trigger=this.element.getAttribute("data-trigger");return{start:this.element.getAttribute("data-start"),ease:this.element.getAttribute("data-ease"),duration:parseFloat(this.element.getAttribute("data-duration")),delay:parseFloat(this.element.getAttribute("data-delay")),end:this.element.getAttribute("data-end"),trigger:trigger==="this"?this.element:trigger,scrub:(()=>{const scrub=this.element.getAttribute("data-scrub");return scrub==="false"?!1:scrub==="true"?!0:parseFloat(scrub)})(),type:this.element.getAttribute("data-type"),toggleActions:this.element.getAttribute("data-toggle-actions"),width:this.element.getAttribute("data-width"),animationType:this.element.getAttribute("data-animation-type"),eventElement:this.element.getAttribute("data-trigger-element"),}}
getContainerAnimation(){let containerName=null;document.querySelectorAll(".dan-horizontal-scroll").forEach((horizontalScroll,index)=>{if(horizontalScroll.contains(this.element)){containerName=`NextHorizontalScroll${index}`}});return containerName?window[containerName]:undefined}
createTimeline(){const containerAnimation=this.getContainerAnimation();this.timeline=gsap.timeline({scrollTrigger:{trigger:this.config.trigger,containerAnimation,start:this.config.start,end:this.config.end,scrub:this.config.scrub,toggleActions:this.config.toggleActions}});switch(this.config.type){case "fromLeft":this.timeline.to(this.motionElement,{width:"100%",delay:this.config.delay,duration:this.config.duration,ease:this.config.ease});break;case "fromCenter":{const width="100%";const match=width.match(/^([\d.]+)(\D+)$/);const centerMargin=match?parseFloat(match[1])/2+match[2]:width/2;this.timeline.fromTo(this.motionElement,{width:0,marginLeft:centerMargin},{width:"100%",marginLeft:0,delay:this.config.delay,duration:this.config.duration,ease:this.config.ease});break}
case "fromRight":this.timeline.fromTo(this.motionElement,{width:0,marginLeft:"100%"},{width:"100%",marginLeft:0,delay:this.config.delay,duration:this.config.duration,ease:this.config.ease});break}}
playAnimation(){if(this.timeline.isActive()){this.timeline.play()}else{this.timeline.restart()}}
reverseAnimation(){gsap.delayedCall(this.config.delay,()=>this.timeline.reverse())}
setupTriggers(){if(this.config.animationType==="click"&&parseFloat(this.config.eventElement)!==0){document.querySelectorAll(this.config.eventElement).forEach((element)=>{element.addEventListener("click",()=>this.timeline.restart())})}else if(this.config.animationType==="hover"&&parseFloat(this.config.eventElement)!==0){document.querySelectorAll(this.config.eventElement).forEach((element)=>{element.addEventListener("mouseover",()=>this.timeline.restart())})}}
init(){this.createTimeline();this.setupTriggers()}
destroy(){if(this.timeline){if(this.timeline.scrollTrigger){this.timeline.scrollTrigger.kill()}
this.timeline.kill()}
if(this.motionElement){gsap.set(this.motionElement,{clearProps:"all"})}
this.element=null;this.motionElement=null;this.timeline=null}}
function dancepad_motion_divider(){if(document.querySelector(".dan-site-loader")&&!window.location.href.includes("breakdance_iframe")){return}
NextDivider.destroyAll();document.querySelectorAll(".dan-motion-divider").forEach((element,index)=>{const instance=new NextDivider(element,index);NextDivider.instances.push(instance)})}
function dancepad_motion_divider_site_loader(){NextDivider.destroyAll();document.querySelectorAll(".dan-motion-divider").forEach((element,index)=>{const instance=new NextDivider(element,index);NextDivider.instances.push(instance)})}