class NextImageReveal{static instances=[];constructor(element){this.wrapper=element;this.element=element.querySelector(".dan-image-reveal__element");this.image=this.element.querySelector(".breakdance-image-object");this.timeline=null;this.config={direction:this.wrapper.getAttribute("data-animation-direction"),duration:parseFloat(this.wrapper.getAttribute("data-animation-duration")),delay:parseFloat(this.wrapper.getAttribute("data-animation-delay")),ease:this.wrapper.getAttribute("data-animation-easing"),toggleActions:this.wrapper.getAttribute("data-scrolltrigger-toggleactions"),start:this.wrapper.getAttribute("data-scrolltrigger-start"),trigger:this.wrapper.getAttribute("data-scrolltrigger-trigger"),animationType:this.wrapper.getAttribute("data-scrolltrigger-additional"),animationElement:this.wrapper.getAttribute("data-scrolltrigger-element"),};this.eventListeners=[];this.init()}
static destroyAll(){NextImageReveal.instances.forEach((instance)=>instance.destroy());NextImageReveal.instances=[]}
init(){this.createTimeline();this.handleScrollRemoval();this.setupTriggers()}
createTimeline(){const trigger=this.config.trigger==="this"?this.wrapper:this.config.trigger;const containerAnimation=this.getContainerAnimation();this.timeline=gsap.timeline({scrollTrigger:{trigger:trigger,containerAnimation:containerAnimation,toggleActions:this.config.toggleActions,start:this.config.start},delay:this.config.delay});this.setupAnimation()}
setupAnimation(){const isVertical=["top","bottom"].includes(this.config.direction);const props=isVertical?"y":"x";this.timeline.set(this.element,{autoAlpha:1}).to(this.element,{duration:this.config.duration,[props]:0,ease:this.config.ease}).to(this.image,{duration:this.config.duration,[props]:0,scale:1,delay:-this.config.duration,ease:this.config.ease})}
handleScrollRemoval(){if(this.config.removeScroll==="1"){this.timeline.progress(1)}}
setupTriggers(){if(this.config.animationType==="click"){document.querySelectorAll(this.config.animationElement).forEach((trigger)=>{const listener=()=>this.timeline.restart();trigger.addEventListener("click",listener);this.eventListeners.push({element:trigger,type:"click",listener})})}
if(this.config.animationType==="hover"){document.querySelectorAll(this.config.animationElement).forEach((trigger)=>{const listener=()=>this.timeline.restart();trigger.addEventListener("mouseover",listener);this.eventListeners.push({element:trigger,type:"mouseover",listener})})}}
playAnimation(){if(this.timeline.isActive()){this.timeline.play()}else{this.timeline.restart()}}
reverseAnimation(){this.timeline.reverse()}
getContainerAnimation(){let containerName=null;document.querySelectorAll(".dan-horizontal-scroll").forEach((horizontalScroll,index)=>{if(horizontalScroll.contains(this.element)){containerName=`NextHorizontalScroll${index}`}});return containerName?window[containerName]:undefined}
destroy(){if(this.timeline?.scrollTrigger)this.timeline.scrollTrigger.kill();if(this.timeline)this.timeline.kill();this.eventListeners.forEach(({element,type,listener})=>element.removeEventListener(type,listener));gsap.set([this.element,this.image],{clearProps:"all"});this.eventListeners=[];this.timeline=null}}
function dancepad_image_reveal(){if(document.querySelector(".dan-site-loader")&&!window.location.href.includes("breakdance_iframe")){return}
NextImageReveal.destroyAll();document.querySelectorAll(".dan-image-reveal").forEach((element)=>{const instance=new NextImageReveal(element);NextImageReveal.instances.push(instance)})}
function dancepad_image_reveal_site_loader(){NextImageReveal.destroyAll();document.querySelectorAll(".dan-image-reveal").forEach((element)=>{const instance=new NextImageReveal(element);NextImageReveal.instances.push(instance)})}