class DanProximityWeight{static instances=[];constructor(element,settings={}){this.element=element;this.text=element.getAttribute('data-text')||element.textContent;this.settings={radius:settings.radius,type:settings.type,minWeight:settings.minWeight,maxWeight:settings.maxWeight,minScale:settings.minScale,maxScale:settings.maxScale,...settings};this.letters=[];this.mousePosition={x:0,y:0};this.rafId=null;this.splitter=null;this.init()}
init(){if(this.element._gsap?.splitText){this.element._gsap.splitText.revert()}
this.element.innerHTML=this.text;this.splitter=new SplitText(this.element,{type:"chars",charsClass:"dan-proximity-weight__char"});this.letters=Array.from(this.splitter.chars);this.handleMouseMove=this.handleMouseMove.bind(this);this.animate=this.animate.bind(this);window.addEventListener('mousemove',this.handleMouseMove);this.rafId=requestAnimationFrame(this.animate)}
handleMouseMove(e){const rect=this.element.getBoundingClientRect();this.mousePosition.x=e.clientX-rect.left;this.mousePosition.y=e.clientY-rect.top}
animate(){const rect=this.element.getBoundingClientRect();this.letters.forEach(letter=>{const letterRect=letter.getBoundingClientRect();const letterX=letterRect.left+letterRect.width/2-rect.left;const letterY=letterRect.top+letterRect.height/2-rect.top;const distance=Math.sqrt(Math.pow(this.mousePosition.x-letterX,2)+Math.pow(this.mousePosition.y-letterY,2));const falloff=Math.max(0,Math.min(1,1-distance/this.settings.radius));if(this.settings.type==='weight'){const weight=this.settings.minWeight+falloff*(this.settings.maxWeight-this.settings.minWeight);letter.style.transform='scale(1)';letter.style.fontVariationSettings=`'wght' ${weight}`}else if(this.settings.type==='size'){const scale=this.settings.minScale+falloff*(this.settings.maxScale-this.settings.minScale);letter.style.fontVariationSettings='';letter.style.transform=`scale(${scale})`}});this.rafId=requestAnimationFrame(this.animate)}
destroy(){if(this.rafId){cancelAnimationFrame(this.rafId);this.rafId=null}
window.removeEventListener('mousemove',this.handleMouseMove);if(this.splitter){this.splitter.revert();this.splitter=null}
this.element.innerHTML=this.text;this.letters=[]}
static destroyAllInstances(){const instances=[...DanProximityWeight.instances];instances.forEach(instance=>{instance.destroy()});DanProximityWeight.instances=[];document.querySelectorAll('.dan-proximity-weight__inner').forEach(el=>{if(el._gsap?.splitText){el._gsap.splitText.revert()}
const originalText=el.getAttribute('data-text');if(originalText){el.innerHTML=originalText}})}}
function dancepad_proximity_weight(){DanProximityWeight.destroyAllInstances();requestAnimationFrame(()=>{document.querySelectorAll('.dan-proximity-weight__inner').forEach((element)=>{const proximityWeight=new DanProximityWeight(element,{type:element.getAttribute('data-type'),radius:parseFloat(element.getAttribute('data-radius')),minWeight:parseFloat(element.getAttribute('data-min-weight')),maxWeight:parseFloat(element.getAttribute('data-max-weight')),minScale:parseFloat(element.getAttribute('data-min-scale')),maxScale:parseFloat(element.getAttribute('data-max-scale')),});DanProximityWeight.instances.push(proximityWeight)})})}