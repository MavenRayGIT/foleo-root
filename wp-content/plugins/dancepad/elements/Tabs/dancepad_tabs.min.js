class NextTabs{constructor(element){this.element=element;this.tabContents=element.querySelectorAll(":scope > .dan-tabs__tab-content");this.tabs=element.querySelectorAll(":scope > .dan-morphing-nav .dan-tabs__tab");this.config={activeTab:parseInt(element.getAttribute("data-activetab"))-1};this.init()}
static instances=[];static destroyAll(){NextTabs.instances.forEach((instance)=>instance.destroy());NextTabs.instances=[]}
init(){this.element.removeAttribute("data-to-hide");this.setupInitialState();this.bindEvents()}
setupInitialState(){this.hideAllExcept(this.config.activeTab)}
hideAllExcept(activeIndex){this.tabContents.forEach((content,index)=>{if(index!==activeIndex){this.hideTabContent(content)}})}
showTab(index){if(!this.tabContents[index])return;this.tabContents.forEach((content)=>this.hideTabContent(content));this.showTabContent(this.tabContents[index])}
hideTabContent(content){content.removeAttribute("data-show");content.setAttribute("data-hide","");content.setAttribute("inert","")}
showTabContent(content){content.removeAttribute("data-hide");content.removeAttribute("inert","");content.setAttribute("data-show","")}
handleTabClick(event){const clickedTab=event.target.closest(".dan-tabs__tab");if(!clickedTab)return;for(let i=0;i<this.tabs.length;i++){if(clickedTab===this.tabs[i]){this.showTab(i);NextMorphingNav.instances.forEach((instance)=>{if(!clickedTab.closest(".dan-tabs .dan-tabs")&&instance.element.closest(".dan-tabs .dan-tabs")){instance.init()}});break}}}
handleTabKeydown(event,tabElement){if(event.key==="Enter"&&document.activeElement===tabElement){const clickedTab=event.target.closest(".dan-tabs__tab");if(!clickedTab)return;for(let i=0;i<this.tabs.length;i++){if(clickedTab===this.tabs[i]){this.showTab(i);NextMorphingNav.instances.forEach((instance)=>{if(!clickedTab.closest(".dan-tabs .dan-tabs")&&instance.element.closest(".dan-tabs .dan-tabs")){instance.init()}});break}}}}
bindEvents(){this.element.addEventListener("click",this.handleTabClick.bind(this));this.element.querySelectorAll(":scope > .dan-morphing-nav .dan-morphing-nav__item").forEach((item)=>{item.addEventListener("keydown",(event)=>this.handleTabKeydown(event,item))})}
destroy(){this.element.removeEventListener("click",this.handleTabClick.bind(this));this.tabContents.forEach((content)=>{content.removeAttribute("data-show");content.removeAttribute("data-hide");content.removeAttribute("inert","")});this.element=null;this.tabContents=null;this.tabs=null}}
function dancepad_tabs(){NextTabs.destroyAll();document.querySelectorAll(".dan-tabs").forEach((element)=>{element.removeAttribute("data-flickering");const instance=new NextTabs(element);NextTabs.instances.push(instance)});initializeTabsObserver()}
function initializeTabsObserver(){const breakdanceCanvas=document.querySelector("#breakdance_canvas");if(!breakdanceCanvas)return;const observer=new MutationObserver((mutations)=>{for(const mutation of mutations){if(mutation.type==="childList"){const hasNewTab=Array.from(mutation.addedNodes).some((node)=>node.classList&&(node.classList.contains("dan-tabs__tab-content")||node.classList.contains("dan-tabs__tab")));if(hasNewTab){dancepad_tabs();break}}}});const tabElements=document.querySelectorAll(".dan-tabs");tabElements.forEach((tabElement)=>{observer.observe(tabElement,{childList:!0,subtree:!0})});return observer}