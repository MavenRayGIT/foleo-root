class Crosshair{static instances=[];constructor(container){this.container=container;this.lineH=container.querySelector('.dan-crosshair__line-horizontal');this.lineV=container.querySelector('.dan-crosshair__line-vertical');this.attachAmount=parseFloat(container.getAttribute('data-attachness'));this.mouse={x:0,y:0};this.renderedStyles={tx:{previous:0,current:0,amt:this.attachAmount},ty:{previous:0,current:0,amt:this.attachAmount}};this.boundRender=this.render.bind(this);this.boundMouseMove=this.handleMouseMove.bind(this);gsap.set([this.lineH,this.lineV],{opacity:0});this.container.addEventListener('mousemove',this.boundMouseMove,{once:!0});this.container.addEventListener('mousemove',this.trackMouse.bind(this));
this.container.querySelectorAll('a').forEach(link=>{const restart=()=>this.render();const kill=()=>{};link.addEventListener('mouseenter',restart);link.addEventListener('mouseleave',kill)})}
getMousePos(e){const bounds=this.container.getBoundingClientRect();return{x:e.clientX-bounds.left,y:e.clientY-bounds.top}}
handleMouseMove(e){this.mouse=this.getMousePos(e);this.renderedStyles.tx.previous=this.renderedStyles.tx.current=this.mouse.x;this.renderedStyles.ty.previous=this.renderedStyles.ty.current=this.mouse.y;gsap.to([this.lineH,this.lineV],{opacity:1});requestAnimationFrame(this.boundRender)}
trackMouse(e){this.mouse=this.getMousePos(e);const bounds=this.container.getBoundingClientRect();const outside=e.clientX<bounds.left||e.clientX>bounds.right||e.clientY<bounds.top||e.clientY>bounds.bottom;gsap.to([this.lineH,this.lineV],{opacity:outside?0:1})}
render(){this.renderedStyles.tx.current=this.mouse.x;this.renderedStyles.ty.current=this.mouse.y;for(const key in this.renderedStyles){const style=this.renderedStyles[key];style.previous=(1-style.amt)*style.previous+style.amt*style.current}
gsap.set(this.lineV,{x:this.renderedStyles.tx.previous});gsap.set(this.lineH,{y:this.renderedStyles.ty.previous});requestAnimationFrame(this.boundRender)}
destroy(){this.container.removeEventListener('mousemove',this.boundMouseMove);gsap.killTweensOf([this.lineH,this.lineV]);gsap.set([this.lineH,this.lineV],{clearProps:"all"})}
static destroyAllInstances(){Crosshair.instances.forEach(instance=>instance.destroy());Crosshair.instances=[]}}
function dancepad_crosshair(){Crosshair.destroyAllInstances();const isBreakdance=window.location.href.includes("breakdance_iframe");document.querySelectorAll('.dan-crosshair').forEach(container=>{if(isBreakdance&&container.getAttribute('data-disable-builder')==='1')return;const instance=new Crosshair(container);Crosshair.instances.push(instance)})}