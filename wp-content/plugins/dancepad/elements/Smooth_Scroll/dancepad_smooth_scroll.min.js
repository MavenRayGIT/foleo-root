class ScrollSnap{constructor(lenis,proximityLimit,{snapType}){this.lenis=lenis;this.proximityLimit=proximityLimit||0.3;this.isHorizontal=this.lenis.options.orientation==="horizontal";this.rootElement=this.lenis.options.content;this.snapType=snapType||this.rootElement.getAttribute("scroll-snap-type")||"mandatory";this.init()}
init(){this.initElements();this.lenis.on("scroll",this.onScroll.bind(this))}
initElements(){this.elements=Array.from(this.rootElement.querySelectorAll('[scroll-snap-align]:not([scroll-snap-align="none"]')).map((element)=>{let snapAlign=element.getAttribute("scroll-snap-align");if(!["start","center","end","none"].includes(snapAlign)){snapAlign="start"}
return{element,snapAlign}})}
onScroll=({velocity})=>{if(Math.abs(velocity)>0.1)return;const wrapperRect=this.lenis.options.wrapper===window?{left:0,top:0,width:this.lenis.dimensions.width,height:this.lenis.dimensions.height}:this.lenis.dimensions.wrapper.getBoundingClientRect();const wrapperPos=this.isHorizontal?wrapperRect.left:wrapperRect.top;const elements=this.elements.map(({element,snapAlign})=>{const elRect=element.getBoundingClientRect();let offset=0;if(snapAlign==="end"){offset=this.isHorizontal?elRect.width-wrapperRect.width:elRect.height-wrapperRect.height}else if(snapAlign==="center"){offset=this.isHorizontal?(elRect.width-wrapperRect.width)/2:(elRect.height-wrapperRect.height)/2}
const elPos=this.isHorizontal?elRect.left:elRect.top;const distance=Math.abs(elPos-wrapperPos+offset);return{element,distance,elRect,offset}}).sort((a,b)=>a.distance-b.distance);let limit=this.isHorizontal?wrapperRect.width:wrapperRect.height;if(this.snapType==="proximity"){limit*=this.proximityLimit}
const element=elements[0];if(element&&element.distance>=limit)return;if(element){this.lenis.scrollTo(element.element,{offset:element.offset})}};destroy(){this.elements=null;this.lenis=null}}
class NextSmoothScroll{constructor(dataElement){this.dataElement=dataElement;this.isPreview=window.location.search.includes("breakdance_iframe");this.scrollSnap=null;this.lenisInstance=null;this.config=this.initConfig();this.init()}
static instances=[];static destroyAll(){NextSmoothScroll.instances.forEach((instance)=>instance.destroy());NextSmoothScroll.instances=[]}
initConfig(){return{disableBuilder:this.dataElement.getAttribute("data-disable-builder")==="1",disableScreen:this.dataElement.getAttribute("data-disable-screen")==="1",type:this.dataElement.getAttribute("data-type"),wrapper:this.dataElement.getAttribute("data-wrapper"),duration:this.dataElement.getAttribute("data-duration"),smoothTouch:this.dataElement.getAttribute("data-smoothtouch"),wheelMultiplier:this.dataElement.getAttribute("data-wheelmultiplier"),touchMultiplier:this.dataElement.getAttribute("data-touchmultiplier"),infinite:this.dataElement.getAttribute("data-infinite")==="1",enableSnap:this.dataElement.getAttribute("data-enable-snap")==="1",snapType:this.dataElement.getAttribute("data-type-snap"),proximityLimit:parseFloat(this.dataElement.getAttribute("data-proximity-limit-snap"))/100,ease:this.dataElement.getAttribute("data-ease"),touchSmooth:this.dataElement.getAttribute("data-touchsmooth"),wrapperGSAP:this.dataElement.getAttribute("data-wrappergsap"),classes:this.dataElement.getAttribute("data-classes")?.split("next11").filter(Boolean)||[],speeds:this.dataElement.getAttribute("data-speeds")?.split("next11").filter(Boolean)||[],lags:this.dataElement.getAttribute("data-lags")?.split("next11").filter(Boolean)||[],}}
shouldInitialize(){if(this.isPreview&&this.config.disableBuilder)return!1;if(this.config.disableScreen&&!window.matchMedia("(pointer:fine)").matches)return!1;return!0}
initLenis(){const wrapper=document.querySelector(this.config.wrapper);this.lenisInstance=new Lenis({wrapper,content:document.documentElement,duration:this.config.duration,easing:(t)=>Math.min(1,1.001-Math.pow(2,-10*t)),direction:"vertical",gestureDirection:"vertical",smoothTouch:this.config.smoothTouch,wheelMultiplier:this.config.wheelMultiplier,touchMultiplier:this.config.touchMultiplier,infinite:this.config.infinite,});if(this.config.enableSnap){this.scrollSnap=new ScrollSnap(this.lenisInstance,this.config.proximityLimit,{snapType:this.config.snapType})}
window.lenisInstance=this.lenisInstance;this.initLenisAnimation();this.bindLenisEvents()}
initLenisAnimation(){const animate=(time)=>{this.lenisInstance.raf(time);ScrollTrigger.update();requestAnimationFrame(animate)};requestAnimationFrame(animate)}
initScrollSmoother(){this.initGSAPAttributes();const touchSmooth=this.config.touchSmooth!==""&&parseFloat(this.config.smoothTouch)!==0&&this.config.touchSmooth;this.smoother=ScrollSmoother.create({content:this.config.wrapperGSAP,smooth:this.config.duration,smoothTouch:touchSmooth,ease:this.config.ease,ignoreMobileResize:!0,effects:!0});this.bindScrollSmootherEvents()}
initGSAPAttributes(){this.config.classes.forEach((className,index)=>{document.querySelectorAll("."+className).forEach((element)=>{const speed=this.config.speeds[index];const lag=this.config.lags[index];if(speed!=="unset"){element.setAttribute("data-speed",speed)}
if(lag!=="unset"){element.setAttribute("data-lag",lag)}})})}
bindLenisEvents(){document.addEventListener("keydown",(event)=>{if(event.key==="Escape"&&this.lenisInstance?.isStopped){this.lenisInstance.start()}});document.querySelectorAll('a[href^="#"]').forEach((anchor)=>{anchor.addEventListener("click",(e)=>{e.preventDefault();const id=anchor.getAttribute("href")?.slice(1);if(!id)return;const element=document.getElementById(id);if(element){element.scrollIntoView({behavior:"smooth"})}})})}
bindScrollSmootherEvents(){document.querySelectorAll('a[href^="#"]').forEach((link)=>{link.addEventListener("click",(e)=>{e.preventDefault();const id=link.getAttribute("href")?.slice(1);if(!id)return;const idElement=document.getElementById(id);if(idElement){this.smoother.scrollTo(idElement,{duration:1})}})})}
init(){if(!this.shouldInitialize())return;if(this.config.type==="lenisjs"){this.initLenis()}else if(this.config.type==="scrollsmoother"){this.initScrollSmoother()}}
destroy(){if(this.scrollSnap){this.scrollSnap.destroy()}
if(this.lenisInstance){this.lenisInstance.destroy();window.lenisInstance=null}
if(this.smoother){this.smoother.kill()}
this.dataElement=null;this.scrollSnap=null;this.lenisInstance=null;this.smoother=null}}
function dancepad_smooth_scroll(){NextSmoothScroll.destroyAll();const dataElement=document.querySelector(".dan-smooth-scroll");if(dataElement){const instance=new NextSmoothScroll(dataElement);NextSmoothScroll.instances.push(instance)}}