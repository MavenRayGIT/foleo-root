class NextImageHotspot{constructor(element){this.element=element;this.type=element.getAttribute("data-type");this.bindEvents()}
bindEvents(){this.handleClick=this.handleClick.bind(this);this.handleFocusIn=this.handleFocusIn.bind(this);this.handleMouseOver=this.handleMouseOver.bind(this);this.handleMouseLeave=this.handleMouseLeave.bind(this);this.handleDocumentClick=this.handleDocumentClick.bind(this);this.handleDocumentFocusIn=this.handleDocumentFocusIn.bind(this);this.element.addEventListener("focusin",this.handleFocusIn);document.addEventListener("focusin",this.handleDocumentFocusIn);if(this.type==="hover"){this.element.addEventListener("mouseover",this.handleMouseOver);this.element.addEventListener("mouseleave",this.handleMouseLeave)}else if(this.type==="click"){this.element.addEventListener("click",this.handleClick);document.addEventListener("click",this.handleDocumentClick)}}
handleClick(){this.element.setAttribute("data-hotspot","triggered")}
handleFocusIn(){this.element.classList.add("dan-image-hotspots__hotspot--focused")}
handleMouseOver(){this.element.classList.add("dan-image-hotspots__hotspot--focused")}
handleMouseLeave(){this.element.classList.remove("dan-image-hotspots__hotspot--focused")}
handleDocumentClick(event){if(!this.element.contains(event.target)){this.element.removeAttribute("data-hotspot","triggered");this.element.classList.remove("dan-image-hotspots__hotspot--focused")}}
handleDocumentFocusIn(event){if(!this.element.contains(event.target)){this.element.classList.remove("dan-image-hotspots__hotspot--focused")}}
destroy(){this.element.removeEventListener("focusin",this.handleFocusIn);document.removeEventListener("focusin",this.handleDocumentFocusIn);if(this.type==="hover"){this.element.removeEventListener("mouseover",this.handleMouseOver);this.element.removeEventListener("mouseleave",this.handleMouseLeave)}else if(this.type==="click"){this.element.removeEventListener("click",this.handleClick);document.removeEventListener("click",this.handleDocumentClick)}
this.element.removeAttribute("data-hotspot");this.element.classList.remove("dan-image-hotspots__hotspot--focused")}}
class NextNextImageHotspots{constructor(wrapper){this.wrapper=wrapper;this.hotspots=[];this.init()}
static instances=[];static destroyAll(){NextNextImageHotspots.instances.forEach((instance)=>instance.destroy());NextNextImageHotspots.instances=[]}
init(){this.wrapper.querySelectorAll(".dan-image-hotspots__hotspot").forEach((hotspotElement)=>{const hotspot=new NextImageHotspot(hotspotElement);this.hotspots.push(hotspot)})}
destroy(){this.hotspots.forEach((hotspot)=>hotspot.destroy());this.hotspots=[];this.wrapper=null}}
function dancepad_image_hotspots(){NextNextImageHotspots.destroyAll();document.querySelectorAll(".dan-image-hotspots").forEach((element)=>{element.removeAttribute("data-flickering");const instance=new NextNextImageHotspots(element);NextNextImageHotspots.instances.push(instance)});initializeImageHoObserver()}
function initializeImageHoObserver(){const breakdanceCanvas=document.querySelector('#breakdance_canvas');if(!breakdanceCanvas)return;const observer=new MutationObserver((mutations)=>{for(const mutation of mutations){if(mutation.type==='childList'){const hasChanges=[...mutation.addedNodes,...mutation.removedNodes].some(node=>node.classList&&(node.classList.contains('dan-image-hotspots__hotspot')));if(hasChanges){dancepad_image_hotspots();break}}}});const sliderElements=document.querySelectorAll('.dan-image-hotspots');sliderElements.forEach(element=>{observer.observe(element,{childList:!0,subtree:!0})});return observer}