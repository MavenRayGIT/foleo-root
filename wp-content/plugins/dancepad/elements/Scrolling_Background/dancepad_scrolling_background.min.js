class ScrollingBackground{static instances=[];constructor(element){this.element=element;this.scrollTriggers=[];this.colors=element.getAttribute('data-colors').split(',');this.duration=parseFloat(element.getAttribute('data-duration'));this.ease=element.getAttribute('data-ease');this.transition=element.getAttribute('data-transition');const offsetRaw=element.offsetHeight/this.colors.length;this.offsetInPixels=this.convertToPixels(offsetRaw);this.createScrollTriggers()}
convertToPixels(value){if(typeof value==='number')return value;const unit=value.match(/[a-z%]+$/i)?.[0];const number=parseFloat(value);switch(unit){case 'px':return number;case 'vh':case 'svh':return(number/100)*window.innerHeight;case 'vw':case 'svw':return(number/100)*window.innerWidth;case '%':return(number/100)*window.innerHeight;default:return number}}
createScrollTriggers(){this.colors.forEach((color,index)=>{const trigger=ScrollTrigger.create({trigger:this.element,start:`${index * this.offsetInPixels}px top`,end:`${(index + 1) * this.offsetInPixels}px top`,onEnter:()=>{if(this.transition==='fade'){gsap.to(this.element,{backgroundColor:color,duration:this.duration,ease:this.ease})}},onEnterBack:()=>{if(this.transition==='fade'){gsap.to(this.element,{backgroundColor:color,duration:this.duration,ease:this.ease})}},onUpdate:(self)=>{if(this.transition==='progressive'){const progress=self.progress;const nextColor=this.colors[index+1]||this.colors[index];gsap.to(this.element,{backgroundColor:gsap.utils.interpolate(color,nextColor,progress),duration:0,ease:this.ease})}}});this.scrollTriggers.push(trigger)})}
destroy(){this.scrollTriggers.forEach(trigger=>trigger.kill());this.scrollTriggers=[]}
static destroyAllInstances(){ScrollingBackground.instances.forEach(instance=>instance.destroy());ScrollingBackground.instances=[]}}
function dancepad_scrolling_background(){ScrollingBackground.destroyAllInstances();document.querySelectorAll('.dan-scrolling-background').forEach(element=>{const instance=new ScrollingBackground(element);ScrollingBackground.instances.push(instance)})}