class NextBlurReveal{static instances=[];constructor(element){Object.assign(this,{element,inner:element.querySelector(".dan-blur-reveal__inner"),start:element.getAttribute("data-start"),end:element.getAttribute("data-end"),ease:element.getAttribute("data-easing"),duration:parseFloat(element.getAttribute("data-duration")),splitType:element.getAttribute("data-split"),stagger:parseFloat(element.getAttribute("data-stagger")),delay:parseFloat(element.getAttribute("data-delay")),trigger:element.getAttribute("data-trigger")==="this"?element:element.getAttribute("data-trigger"),toggleActions:element.getAttribute("data-toggleactions"),scrub:element.getAttribute("data-scrub")==="1",additionalTriggers:element.getAttribute("data-additional_triggers"),triggerElement:element.getAttribute("data-element"),blurFrom:element.getAttribute("data-blur-from"),eventListeners:[],lineWrappers:[],});this.initialize()}
initialize(){if(!this.inner)return;const content=this.inner.getAttribute("data-content");if(content){this.inner.innerHTML=content}
this.createSplitText();this.wrapLines();this.createAnimation();this.setupAdditionalTriggers()}
createSplitText(){if(this.splitText){this.splitText.revert()}
const splitConfig={lines:!0,linesClass:"line",[this.splitType==="chars"?"chars":"words"]:this.splitType!=="lines",[this.splitType==="chars"?"charsClass":"wordsClass"]:this.splitType==="chars"?"char":"word",};this.splitText=new SplitText(this.inner,splitConfig);this.splitElements=this.splitType==="chars"?this.splitText.chars:this.splitType==="words"?this.splitText.words:this.splitText.lines}
wrapLines(){this.lineWrappers.forEach((wrapper)=>wrapper.remove());this.lineWrappers=[];this.splitText.lines.forEach((line)=>{const wrapper=document.createElement("div");wrapper.classList.add("dan-blur-reveal__line-wrapper");wrapper.appendChild(line);this.inner.appendChild(wrapper);this.lineWrappers.push(wrapper)})}
createAnimation(){const containerName=[...document.querySelectorAll(".dan-horizontal-scroll")].findIndex((scroll)=>scroll.contains(this.element))!==-1?`NextHorizontalScroll${[...document.querySelectorAll(".dan-horizontal-scroll")].findIndex((scroll) => scroll.contains(this.element))}`:undefined;this.animation=gsap.timeline({scrollTrigger:{trigger:this.trigger,containerAnimation:containerName?window[containerName]:undefined,start:this.start,end:this.end,toggleActions:this.toggleActions,scrub:this.scrub}}).fromTo(this.splitElements,{filter:`blur(${parseFloat(this.blurFrom)}px)`,opacity:0},{filter:"blur(0px)",opacity:1,duration:this.duration,delay:this.delay,stagger:this.stagger,ease:this.ease})}
setupAdditionalTriggers(){if(this.additionalTriggers&&this.triggerElement){const eventType=this.additionalTriggers.includes("click")?"click":"mouseover";[...document.querySelectorAll(this.triggerElement)].forEach((el)=>{const listener=()=>this.animation.restart();el.addEventListener(eventType,listener);this.eventListeners.push({element:el,type:eventType,listener})})}}
destroy(){if(this.animation?.scrollTrigger){this.animation.scrollTrigger.kill()}
if(this.animation){this.animation.kill()}
if(this.splitText){this.splitText.revert()}
this.lineWrappers.forEach((wrapper)=>wrapper.remove());this.lineWrappers=[];this.eventListeners.forEach(({element,type,listener})=>{element.removeEventListener(type,listener)});this.eventListeners=[];if(this.inner){const content=this.inner.getAttribute("data-content");if(content){this.inner.innerHTML=content}}}
static destroyAll(){NextBlurReveal.instances.forEach((instance)=>instance.destroy());NextBlurReveal.instances=[]}}
const dancepad_blur_reveal=()=>{if(document.querySelector(".dan-site-loader")&&!window.location.href.includes("breakdance_iframe")){return}
gsap.registerPlugin(ScrollTrigger);NextBlurReveal.destroyAll();const instances=[];const animations={};document.querySelectorAll(".dan-blur-reveal").forEach((element,index)=>{element.removeAttribute("data-flickering");const instance=new NextBlurReveal(element);instances.push(instance);animations[`anim${index}`]=instance.animation});NextBlurReveal.instances=instances;return animations};const dancepad_blur_reveal_site_loader=()=>{gsap.registerPlugin(ScrollTrigger);NextBlurReveal.destroyAll();const instances=[];const animations={};document.querySelectorAll(".dan-blur-reveal").forEach((element,index)=>{element.removeAttribute("data-flickering");const instance=new NextBlurReveal(element);instances.push(instance);animations[`anim${index}`]=instance.animation});NextBlurReveal.instances=instances;return animations}