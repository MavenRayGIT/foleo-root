class ScrollGallery{static instances=[];constructor(container){this.container=container;this.imagePath=gsap.utils.toArray(container.querySelectorAll(".dan-scrolling-gallery__image"));this.imageThumbnails=container.querySelectorAll(".dan-scrolling-gallery__thumbnail");this.randomMarginThumbnails=parseFloat(container.getAttribute("data-random-margin-thumbnails"));this.randomMarginImages=parseFloat(container.getAttribute("data-random-margin-images"));this.scrollTriggers=[];this.activeThumbnail=null;this.setup();container.removeAttribute("data-flickering")}
getRandomMargin(type){const values=type==="thumb"?[-this.randomMarginThumbnails,-this.randomMarginThumbnails/2,0,this.randomMarginThumbnails/2,this.randomMarginThumbnails]:[-this.randomMarginImages,-this.randomMarginImages/2,0,this.randomMarginImages/2,this.randomMarginImages];return values[Math.floor(Math.random()*values.length)]+"px"}
scrollToImage(el){const imageRect=el.getBoundingClientRect();const offsetTop=imageRect.top+window.pageYOffset;window.scrollTo({top:offsetTop-window.innerHeight/2+imageRect.height/2,behavior:"smooth"})}
animateThumbnail(thumbnail,isActive){thumbnail.classList.toggle("dan-scrolling-gallery__thumbnail--active",isActive)}
setup(){this.imagePath.forEach((el,ind)=>{const thumbnail=this.imageThumbnails[ind];el.style.left=this.getRandomMargin("image");thumbnail.style.left=this.getRandomMargin("thumb");thumbnail.addEventListener("click",()=>this.scrollToImage(el));thumbnail.addEventListener("keydown",(event)=>{if(event.key==="Enter")this.scrollToImage(el);});const trigger=ScrollTrigger.create({trigger:el,start:this.container.getAttribute("data-start"),end:this.container.getAttribute("data-end"),onToggle:(self)=>{if(self.isActive){if(this.activeThumbnail&&this.activeThumbnail!==thumbnail){this.animateThumbnail(this.activeThumbnail,!1)}
this.animateThumbnail(thumbnail,!0);this.activeThumbnail=thumbnail}else if(this.activeThumbnail===thumbnail){this.animateThumbnail(thumbnail,!1)}}});this.scrollTriggers.push(trigger)});this.imageThumbnails[0].classList.add("dan-scrolling-gallery__thumbnail--active");this.activeThumbnail=this.imageThumbnails[0]}
destroy(){this.scrollTriggers.forEach(trigger=>trigger.kill());this.scrollTriggers=[]}
static destroyAllInstances(){ScrollGallery.instances.forEach(instance=>instance.destroy());ScrollGallery.instances=[]}}
function dancepad_scrolling_gallery(){ScrollGallery.destroyAllInstances();const isBreakdance=window.location.href.includes("breakdance_iframe");document.querySelectorAll('.dan-scrolling-gallery').forEach(container=>{if(isBreakdance&&container.getAttribute('data-disable-builder')==='1')return;const instance=new ScrollGallery(container);ScrollGallery.instances.push(instance)})}