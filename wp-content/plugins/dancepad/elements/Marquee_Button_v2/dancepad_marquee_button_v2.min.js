class NextMarqueeButtonV2{static instances=[];constructor(element){Object.assign(this,{element,swapElement:element.querySelector(".dan-marquee-button-v2__swap"),type:element.getAttribute("data-type"),stagger:parseFloat(element.getAttribute("data-stagger")),splitText:null,splitElements:[],resizeObserver:null});this.initialize()}
initialize(){this.updateContent();this.createSplitText();this.setupSplitElements();this.setupResizeObserver()}
updateContent(){if(this.swapElement){const content=this.swapElement.getAttribute('data-content');if(content){this.swapElement.textContent=content}}}
createSplitText(){if(this.splitText){this.splitText.revert()}
const config=this.getSplitConfig();this.splitText=new SplitText(this.swapElement,config);this.splitElements=this.getSplitElements()}
getSplitConfig(){const configs={'lines':{type:"lines, words, chars",linesClass:"dan-marquee-button-v2__swap-line",wordsClass:"dan-marquee-button-v2__swap-word",charsClass:"dan-marquee-button-v2__swap-letter"},'words':{type:"words, chars",wordsClass:"dan-marquee-button-v2__swap-word",charsClass:"dan-marquee-button-v2__swap-letter"},'chars':{type:"chars",charsClass:"dan-marquee-button-v2__swap-letter"}};return configs[this.type]||configs.chars}
getSplitElements(){switch(this.type){case 'lines':return this.splitText.lines;case 'words':return this.splitText.words;case 'chars':return this.splitText.chars;default:return[]}}
setupSplitElements(){this.splitElements.forEach((element,index)=>{element.style.transitionDelay=`${index * this.stagger}s`;element.style.setProperty("--after-content",`"${element.textContent}"`)})}
setupResizeObserver(){this.resizeObserver=new ResizeObserver(()=>{if(this.splitText){this.splitText.revert();this.updateContent();this.createSplitText();this.setupSplitElements()}});this.resizeObserver.observe(this.element)}
destroy(){if(this.resizeObserver){this.resizeObserver.disconnect()}
if(this.splitText){this.splitText.revert()}
this.splitElements.forEach(element=>{element.style.removeProperty('transition-delay');element.style.removeProperty('--after-content')});this.updateContent()}
static destroyAll(){NextMarqueeButtonV2.instances.forEach(instance=>instance.destroy());NextMarqueeButtonV2.instances=[]}}
const dancepad_marquee_button_v2=()=>{NextMarqueeButtonV2.destroyAll();document.querySelectorAll(".dan-marquee-button-v2").forEach(element=>{element.removeAttribute('data-flickering');NextMarqueeButtonV2.instances.push(new NextMarqueeButtonV2(element))})}