class NextCursorSlide{constructor(element){this.wrapper=element;this.transform=element.querySelector('.dan-cursor-slide__transform');this.config={disableTouchDevices:element.getAttribute('data-disable-touch-devices')==='1',target:element.getAttribute('data-target'),movementDuration:parseFloat(element.getAttribute('data-movement-duration')),movementEase:element.getAttribute('data-movement-ease')};this.targets=[];this.animations={xMove:null,yMove:null};this.handleMouseMove=this.handleMouseMove.bind(this);this.handleTargetEnter=this.handleTargetEnter.bind(this);this.handleTargetLeave=this.handleTargetLeave.bind(this);this.init()}
static instances=[];static destroyAll(){NextCursorSlide.instances.forEach(instance=>instance.destroy());NextCursorSlide.instances=[]}
init(){if(this.shouldInitialize()){this.setupTargets();if(this.targets.length>0){this.setupAnimations();this.bindEvents()}}}
shouldInitialize(){if(!window.matchMedia('(pointer:fine)').matches&&this.config.disableTouchDevices)return!1;return!0}
setupTargets(){if(this.config.target){this.targets=Array.from(document.querySelectorAll(this.config.target))}}
setupAnimations(){this.animations.xMove=gsap.quickTo(this.wrapper,'left',{duration:this.config.movementDuration,ease:this.config.movementEase});this.animations.yMove=gsap.quickTo(this.wrapper,'top',{duration:this.config.movementDuration,ease:this.config.movementEase})}
bindEvents(){document.addEventListener('mousemove',this.handleMouseMove);this.targets.forEach((target,index)=>{target.addEventListener('mouseenter',()=>this.handleTargetEnter(index));target.addEventListener('mouseleave',this.handleTargetLeave)})}
handleMouseMove(event){this.animations.xMove(event.clientX);this.animations.yMove(event.clientY)}
handleTargetEnter(index){if(this.transform){this.transform.style.top=`${-100 * index}%`}
this.wrapper.classList.remove('dan-cursor-slide--closed');this.wrapper.classList.add('dan-cursor-slide--opened')}
handleTargetLeave(event){if(!event.relatedTarget||!event.relatedTarget.closest('.project')){this.wrapper.classList.remove('dan-cursor-slide--opened');this.wrapper.classList.add('dan-cursor-slide--closed')}
if(this.transform){this.transform.style.top='0'}}
destroy(){document.removeEventListener('mousemove',this.handleMouseMove);this.targets.forEach((target,index)=>{target.removeEventListener('mouseenter',()=>this.handleTargetEnter(index));target.removeEventListener('mouseleave',this.handleTargetLeave)});if(this.animations.xMove)gsap.killTweensOf(this.wrapper,'left');if(this.animations.yMove)gsap.killTweensOf(this.wrapper,'top');if(this.transform){this.transform.style.top=''}
this.wrapper.classList.remove('dan-cursor-slide--opened','dan-cursor-slide--closed');this.wrapper.style.left='';this.wrapper.style.top='';this.wrapper=null;this.transform=null;this.targets=[];this.animations={xMove:null,yMove:null}}}
function dancepad_cursor_slide(){NextCursorSlide.destroyAll();document.querySelectorAll('.dan-cursor-slide').forEach(element=>{const instance=new NextCursorSlide(element);NextCursorSlide.instances.push(instance)});initializeCursorSlideObserver()}
function initializeCursorSlideObserver(){const breakdanceCanvas=document.querySelector('#breakdance_canvas');if(!breakdanceCanvas)return;const observer=new MutationObserver((mutations)=>{for(const mutation of mutations){if(mutation.type==='childList'){const hasNewItem=Array.from(mutation.addedNodes).some(node=>node.classList&&(node.classList.contains('dan-cursor-slide__item')||node.classList.contains('dan-cursor-slide__transform')));if(hasNewItem){dancepad_cursor_slide();break}}}});const cursorSlideElements=document.querySelectorAll('.dan-cursor-slide');cursorSlideElements.forEach(element=>{observer.observe(element,{childList:!0,subtree:!0})});return observer}