class DanSwapReading{static instances=[];constructor(element){this.element=element;this.paragraph=element.querySelector('.dan-swap-reading__paragraph');this.split=null;this.start=element.getAttribute('data-start');this.end=element.getAttribute('data-end');this.duration=parseFloat(element.getAttribute('data-duration'));this.ease=element.getAttribute('data-ease');this.scroller=element.getAttribute('data-scroller');this.resizeHandler=this.handleResize.bind(this);this.scrollTriggers=[];this.init()}
createSplitText(){const split=new SplitText(this.paragraph,{type:"lines",linesClass:"split-line"});this.paragraph.innerHTML='';split.lines.forEach(line=>{const lineWrapper=document.createElement('div');lineWrapper.className='dan-swap-reading__line';const originalLine=document.createElement('div');originalLine.className='dan-swap-reading__original-line';originalLine.textContent=line.textContent;const maskLine=document.createElement('div');maskLine.className='dan-swap-reading__mask-line';maskLine.textContent=line.textContent;lineWrapper.appendChild(originalLine);lineWrapper.appendChild(maskLine);this.paragraph.appendChild(lineWrapper)});return split}
handleResize(){if(this.split){this.split.revert()}
this.split=this.createSplitText()}
init(){this.split=this.createSplitText();window.addEventListener('resize',this.resizeHandler);const lines=this.element.querySelectorAll('.dan-swap-reading__line');lines.forEach((line)=>{const trigger=ScrollTrigger.create({trigger:line,start:this.start,end:this.end,scrub:!0,scroller:this.scroller,onUpdate:(self)=>{gsap.to(line.querySelector('.dan-swap-reading__original-line'),{y:`${-100 * self.progress}%`,duration:parseFloat(this.duration),ease:this.ease});gsap.to(line.querySelector('.dan-swap-reading__mask-line'),{y:`${-100 * self.progress}%`,duration:parseFloat(this.duration),ease:this.ease})}});this.scrollTriggers.push(trigger)})}
destroy(){window.removeEventListener('resize',this.resizeHandler);if(this.split){this.split.revert()}
this.scrollTriggers.forEach(trigger=>{trigger.kill()})}
static destroyAllInstances(){DanSwapReading.instances.forEach((instance)=>instance.destroy());DanSwapReading.instances=[]}}
function dancepad_swap_reading(){DanSwapReading.destroyAllInstances();document.querySelectorAll('.dan-swap-reading').forEach((element)=>{const swapReading=new DanSwapReading(element);DanSwapReading.instances.push(swapReading)})}