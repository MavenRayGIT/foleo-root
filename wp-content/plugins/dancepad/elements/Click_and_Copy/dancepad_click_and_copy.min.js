class NextClickAndCopy{constructor(element,index){this.element=element;this.index=index;this.timeout=null;this.tippyInstance=null;this.icon=this.element.querySelector(".dan-click-and-copy__icon");this.config=this.initConfig();this.iconClasses=this.initIconClasses();this.init()}
static instances=[];static destroyAll(){NextClickAndCopy.instances.forEach((instance)=>instance.destroy());NextClickAndCopy.instances=[]}
initConfig(){return{type:this.element.getAttribute("data-type"),copyContent:this.element.getAttribute("data-copycontent"),copiedContent:this.element.getAttribute("data-copiedcontent"),textElement:this.element.getAttribute("data-textelement"),selection:this.element.getAttribute("data-selection")==="1",animation:this.element.getAttribute("data-animation")==="1",arrow:this.element.getAttribute("data-arrow")==="1",inertia:this.element.getAttribute("data-inertia")==="1",tippyAnimation:this.element.getAttribute("data-tippyanimation"),tippyPlacement:this.element.getAttribute("data-tippyplacement"),touch:this.element.getAttribute("data-touch")==="1",}}
initIconClasses(){if(!this.icon)return{hidden:[],visible:[]};const hiddenIcon=this.element.querySelector(".dan-click-and-copy__icon--hidden");return{hidden:Array.from(hiddenIcon.classList).filter((cls)=>cls!=="dan-click-and-copy__icon--hidden"),visible:Array.from(this.icon.classList)}}
addUnit(value){if(!value)return value;if(/[\d.]+(rem|em|px|pt|%|in|cm|mm|ex|pc)$/i.test(value))return value;return value+"px"}
createStyles(){const theme=`nextcopytippy${this.index}`;return theme}
replaceBreakdanceSelector(text){return text.replace(/\.breakdance \.bde-div-[\w-]+/g,"%%SELECTOR%%")}
handleCopy=()=>{if(this.config.type==="text"){const currentText=this.element.getAttribute("data-text");this.copyText(this.replaceBreakdanceSelector(currentText))}else{const textElement=document.querySelector(`.${this.config.textElement}`);if(textElement){this.copyText(this.replaceBreakdanceSelector(textElement.textContent));if(this.config.selection){window.getSelection().selectAllChildren(textElement)}else{window.getSelection().removeAllRanges()}}}};copyText(text){const textarea=document.createElement("textarea");textarea.value=text;document.body.appendChild(textarea);textarea.select();document.execCommand("copy");document.body.removeChild(textarea)}
initTippy(theme){if(!this.config.animation)return;this.tippyInstance=tippy(this.element,{content:this.config.copyContent,trigger:"mouseenter click",arrow:this.config.arrow,animation:this.config.tippyAnimation,inertia:this.config.inertia,placement:this.config.tippyPlacement,zIndex:9999,touch:this.config.touch,theme:theme,appendTo:()=>this.element,onShow:(instance)=>this.handleTippyShow(instance),})}
handleTippyShow(instance){const handleClick=()=>{this.handleCopy();instance.setContent(this.config.copiedContent);if(this.icon){this.icon.classList.remove(...this.iconClasses.visible);this.icon.classList.add(...this.iconClasses.hidden)}
clearTimeout(this.timeout);this.timeout=setTimeout(()=>{instance.setContent(this.config.copyContent);if(this.icon){this.icon.classList.remove(...this.iconClasses.hidden);this.icon.classList.add(...this.iconClasses.visible)}},2000)};const handleMouseLeave=()=>{instance.hide();setTimeout(()=>{instance.setContent(this.config.copyContent)},300);if(this.icon){this.icon.classList.remove(...this.iconClasses.hidden);this.icon.classList.add(...this.iconClasses.visible)}};this.element.addEventListener("click",handleClick);this.element.addEventListener("mouseleave",handleMouseLeave)}
init(){if((this.config.textElement||this.config.type==="text")&&this.config.animation){const theme=this.createStyles();this.initTippy(theme)}}
destroy(){if(this.tippyInstance){this.tippyInstance.destroy()}
if(this.timeout){clearTimeout(this.timeout)}
if(this.icon){this.icon.classList.remove(...this.iconClasses.hidden);this.icon.classList.add(...this.iconClasses.visible)}
this.element=null;this.icon=null;this.tippyInstance=null}}
function dancepad_click_and_copy(){NextClickAndCopy.destroyAll();document.querySelectorAll(".dan-click-and-copy:not(.dan-click-and-copy--plugin-dont-trigger)").forEach((element,index)=>{const instance=new NextClickAndCopy(element,index);NextClickAndCopy.instances.push(instance)})}