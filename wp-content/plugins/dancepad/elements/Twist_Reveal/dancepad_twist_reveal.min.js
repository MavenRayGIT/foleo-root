class NextTwistReveal{static instances=[];constructor(element){Object.assign(this,{element,inner:element.querySelector(".dan-twist-reveal__inner"),start:element.getAttribute("data-start"),end:element.getAttribute("data-end"),ease:element.getAttribute("data-easing"),duration:parseFloat(element.getAttribute("data-duration")),delay:parseFloat(element.getAttribute("data-delay")),trigger:element.getAttribute("data-trigger")==="this"?element:element.getAttribute("data-trigger"),toggleActions:element.getAttribute("data-toggleactions"),scrub:element.getAttribute("data-scrub")==="1",additionalTriggers:element.getAttribute("data-additional_triggers"),triggerElement:element.getAttribute("data-element"),eventListeners:[],});this.initialize()}
initialize(){this.createAnimation();this.setupAdditionalTriggers()}
createAnimation(){const containerName=[...document.querySelectorAll(".dan-horizontal-scroll")].findIndex((scroll)=>scroll.contains(this.element))!==-1?`NextHorizontalScroll${[...document.querySelectorAll(".dan-horizontal-scroll")].findIndex((scroll) => scroll.contains(this.element))}`:undefined;this.animation=gsap.timeline({scrollTrigger:{trigger:this.trigger,containerAnimation:containerName?window[containerName]:undefined,start:this.start,end:this.end,toggleActions:this.toggleActions,scrub:this.scrub}}).fromTo(this.inner,{y:"100%",rotationX:-80,opacity:0},{y:0,rotationX:0,opacity:1,duration:this.duration,delay:this.delay,ease:this.ease})}
setupAdditionalTriggers(){if(this.additionalTriggers&&this.triggerElement){const eventType=this.additionalTriggers.includes("click")?"click":"mouseover";[...document.querySelectorAll(this.triggerElement)].forEach((el)=>{const listener=()=>this.animation.restart();el.addEventListener(eventType,listener);this.eventListeners.push({element:el,type:eventType,listener})})}}
destroy(){if(this.animation?.scrollTrigger)this.animation.scrollTrigger.kill();if(this.animation)this.animation.kill();this.eventListeners.forEach(({element,type,listener})=>element.removeEventListener(type,listener));this.eventListeners=[]}
static destroyAll(){NextTwistReveal.instances.forEach((instance)=>instance.destroy());NextTwistReveal.instances=[]}}
const dancepad_twist_reveal=()=>{if(document.querySelector(".dan-site-loader")&&!window.location.href.includes("breakdance_iframe")){return}
gsap.registerPlugin(ScrollTrigger);NextTwistReveal.destroyAll();const instances=[];const animations={};document.querySelectorAll(".dan-twist-reveal").forEach((element,index)=>{element.removeAttribute("data-flickering");const instance=new NextTwistReveal(element);instances.push(instance);animations[`anim${index}`]=instance.animation});NextTwistReveal.instances=instances;return animations};const dancepad_twist_reveal_site_loader=()=>{gsap.registerPlugin(ScrollTrigger);NextTwistReveal.destroyAll();const instances=[];const animations={};document.querySelectorAll(".dan-twist-reveal").forEach((element,index)=>{element.removeAttribute("data-flickering");const instance=new NextTwistReveal(element);instances.push(instance);animations[`anim${index}`]=instance.animation});NextTwistReveal.instances=instances;return animations}